"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./src/components/ChatWidget/MessageBubble.tsx":
/*!*****************************************************!*\
  !*** ./src/components/ChatWidget/MessageBubble.tsx ***!
  \*****************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _barrel_optimize_names_motion_framer_motion__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! __barrel_optimize__?names=motion!=!framer-motion */ \"(app-pages-browser)/./node_modules/framer-motion/dist/es/render/components/motion/proxy.mjs\");\n/* harmony import */ var _barrel_optimize_names_Bot_User_lucide_react__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! __barrel_optimize__?names=Bot,User!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/user.js\");\n/* harmony import */ var _barrel_optimize_names_Bot_User_lucide_react__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! __barrel_optimize__?names=Bot,User!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/bot.js\");\n/* harmony import */ var react_markdown__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! react-markdown */ \"(app-pages-browser)/./node_modules/react-markdown/lib/index.js\");\n/* harmony import */ var _MCQComponent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./MCQComponent */ \"(app-pages-browser)/./src/components/ChatWidget/MCQComponent.tsx\");\n/* harmony import */ var _ChartComponent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ChartComponent */ \"(app-pages-browser)/./src/components/ChatWidget/ChartComponent.tsx\");\n/* harmony import */ var _GanttChart__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./GanttChart */ \"(app-pages-browser)/./src/components/ChatWidget/GanttChart.tsx\");\n/* harmony import */ var _FundGrid__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./FundGrid */ \"(app-pages-browser)/./src/components/ChatWidget/FundGrid.tsx\");\n/* harmony import */ var _SimpleChart__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./SimpleChart */ \"(app-pages-browser)/./src/components/ChatWidget/SimpleChart.tsx\");\n/* harmony import */ var _CompactChart__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./CompactChart */ \"(app-pages-browser)/./src/components/ChatWidget/CompactChart.tsx\");\n/* harmony import */ var _LeadCollectionForm__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./LeadCollectionForm */ \"(app-pages-browser)/./src/components/ChatWidget/LeadCollectionForm.tsx\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\n\n\n\n\nconst DynamicQuiz = (param)=>{\n    let { quizData, onComplete } = param;\n    _s();\n    const [currentQuestionIndex, setCurrentQuestionIndex] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [answers, setAnswers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    if (!quizData || !quizData.questions) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"text-red-500\",\n            children: \"Invalid quiz data\"\n        }, void 0, false, {\n            fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n            lineNumber: 34,\n            columnNumber: 12\n        }, undefined);\n    }\n    const questions = quizData.questions;\n    const currentQuestion = questions[currentQuestionIndex];\n    // Convert backend question format to MCQComponent format\n    const formattedQuestion = {\n        id: currentQuestion.id,\n        question: currentQuestion.text,\n        type: \"single\",\n        options: currentQuestion.options.map((option, index)=>({\n                id: \"option_\".concat(index),\n                text: option,\n                value: option\n            }))\n    };\n    const handleAnswer = (questionId, selectedOptions)=>{\n        const newAnswers = {\n            ...answers,\n            [questionId]: selectedOptions\n        };\n        setAnswers(newAnswers);\n        // Move to next question or complete\n        if (currentQuestionIndex < questions.length - 1) {\n            setCurrentQuestionIndex(currentQuestionIndex + 1);\n        } else {\n            // Calculate risk score based on backend scoring system\n            const totalScore = calculateRiskScore(newAnswers, questions);\n            const riskLevel = getRiskLevel(totalScore, quizData.scoring);\n            // Send result back to chat\n            onComplete(\"Risk Assessment Complete: \".concat(riskLevel, \" profile determined based on your responses.\"));\n        }\n    };\n    const calculateRiskScore = (answers, questions)=>{\n        let score = 0;\n        questions.forEach((question, index)=>{\n            const answer = answers[question.id];\n            if (answer && answer.length > 0) {\n                // Score based on option position (1-4 points per question)\n                const optionIndex = question.options.indexOf(answer[0]);\n                score += optionIndex + 1;\n            }\n        });\n        return score;\n    };\n    const getRiskLevel = (score, scoring)=>{\n        for (const [range, level] of Object.entries(scoring)){\n            const [min, max] = range.split(\"-\").map(Number);\n            if (score >= min && score <= max) {\n                return level;\n            }\n        }\n        return \"Medium Risk\"; // Default fallback\n    };\n    const progress = (currentQuestionIndex + 1) / questions.length * 100;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"bg-white rounded-lg p-4 border border-gray-200\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mb-4\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                        className: \"text-lg font-semibold text-gray-900\",\n                        children: quizData.title\n                    }, void 0, false, {\n                        fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                        lineNumber: 98,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-sm text-gray-600 mt-1\",\n                        children: quizData.description\n                    }, void 0, false, {\n                        fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                        lineNumber: 99,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mt-3\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex justify-between text-xs text-gray-500 mb-1\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        children: [\n                                            \"Question \",\n                                            currentQuestionIndex + 1,\n                                            \" of \",\n                                            questions.length\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                                        lineNumber: 104,\n                                        columnNumber: 13\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        children: [\n                                            Math.round(progress),\n                                            \"%\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                                        lineNumber: 105,\n                                        columnNumber: 13\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                                lineNumber: 103,\n                                columnNumber: 11\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-full bg-gray-200 rounded-full h-2\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"bg-blue-600 h-2 rounded-full transition-all duration-300\",\n                                    style: {\n                                        width: \"\".concat(progress, \"%\")\n                                    }\n                                }, void 0, false, {\n                                    fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                                    lineNumber: 108,\n                                    columnNumber: 13\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                                lineNumber: 107,\n                                columnNumber: 11\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                        lineNumber: 102,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                lineNumber: 97,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_MCQComponent__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                question: formattedQuestion,\n                onAnswer: handleAnswer,\n                className: \"mb-0\"\n            }, void 0, false, {\n                fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                lineNumber: 117,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n        lineNumber: 95,\n        columnNumber: 5\n    }, undefined);\n};\n_s(DynamicQuiz, \"ILatPGejwxoTHpjxrCZSBw++8gE=\");\n_c = DynamicQuiz;\nconst MessageBubble = (param)=>{\n    let { message, isLatest = false, onSendMessage } = param;\n    const isUser = message.role === \"user\";\n    const isAssistant = message.role === \"assistant\";\n    // Function to parse and render comparison charts\n    const renderComparisonChart = (content)=>{\n        try {\n            // Try to extract structured data first (from tool JSON response)\n            const jsonMatch = content.match(/\\{[\\s\\S]*\"type\":\\s*\"comparison\"[\\s\\S]*\\}/);\n            if (jsonMatch) {\n                const toolData = JSON.parse(jsonMatch[0]);\n                if (toolData.data && Array.isArray(toolData.data)) {\n                    // Extract metric from the data structure\n                    const firstItem = toolData.data[0];\n                    const metric = Object.keys(firstItem).find((key)=>key !== \"Fund Name\") || \"Performance\";\n                    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mt-4 w-full\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_GanttChart__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                            title: toolData.title || \"Fund Performance Comparison\",\n                            data: toolData.data,\n                            metric: metric,\n                            className: \"w-full max-w-full\"\n                        }, void 0, false, {\n                            fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                            lineNumber: 144,\n                            columnNumber: 15\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                        lineNumber: 143,\n                        columnNumber: 13\n                    }, undefined);\n                }\n            }\n            // Fallback: Extract fund data from text content\n            const lines = content.split(\"\\n\");\n            const fundData = [];\n            let metric = \"365D Return\";\n            lines.forEach((line)=>{\n                const match = line.match(/(.+?):\\s*(\\d+\\.?\\d*)%/);\n                if (match) {\n                    const [, fundName, value] = match;\n                    fundData.push({\n                        \"Fund Name\": fundName.trim(),\n                        [metric]: parseFloat(value)\n                    });\n                }\n            });\n            if (fundData.length >= 2) {\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"mt-4 w-full\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_GanttChart__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                        title: \"Fund Performance Comparison\",\n                        data: fundData,\n                        metric: metric,\n                        className: \"w-full max-w-full\"\n                    }, void 0, false, {\n                        fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                        lineNumber: 174,\n                        columnNumber: 13\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                    lineNumber: 173,\n                    columnNumber: 11\n                }, undefined);\n            }\n        } catch (error) {\n            console.error(\"Error rendering comparison chart:\", error);\n        }\n        return null;\n    };\n    // Function to render performance analysis charts\n    const renderPerformanceChart = (content)=>{\n        try {\n            // Try to extract structured data first (from tool JSON response)\n            const jsonMatch = content.match(/\\{[\\s\\S]*\"type\":\\s*\"performance_analysis\"[\\s\\S]*\\}/);\n            if (jsonMatch) {\n                const toolData = JSON.parse(jsonMatch[0]);\n                if (toolData.chart_data && toolData.chart_data.series) {\n                    const periods = Array.isArray(toolData.chart_data.xAxis) ? toolData.chart_data.xAxis : [];\n                    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mt-4 w-full\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ChartComponent__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                            title: toolData.title || \"Performance Analysis\",\n                            data: {\n                                labels: periods,\n                                datasets: toolData.chart_data.series.map((fund, index)=>({\n                                        label: fund.fund_name,\n                                        data: periods.map((p)=>{\n                                            const raw = fund[p];\n                                            const num = typeof raw === \"number\" ? raw : parseFloat(String(raw));\n                                            return isNaN(num) ? 0 : num;\n                                        }),\n                                        color: [\n                                            \"#3b82f6\",\n                                            \"#10b981\",\n                                            \"#f59e0b\",\n                                            \"#ef4444\",\n                                            \"#8b5cf6\"\n                                        ][index] || \"#6b7280\"\n                                    }))\n                            },\n                            type: \"bar\",\n                            className: \"w-full max-w-full\"\n                        }, void 0, false, {\n                            fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                            lineNumber: 200,\n                            columnNumber: 15\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                        lineNumber: 199,\n                        columnNumber: 13\n                    }, undefined);\n                }\n            }\n            // Fallback: Extract multi-period performance data from text\n            const fundMatches = content.match(/(\\w+\\s+\\w+\\s+Fund):/g);\n            if (!fundMatches || fundMatches.length < 2) return null;\n            const funds = fundMatches.map((f)=>f.replace(\":\", \"\").trim());\n            const periods = [\n                \"365D\",\n                \"2Y\",\n                \"3Y\"\n            ];\n            const colors = [\n                \"#3b82f6\",\n                \"#10b981\",\n                \"#f59e0b\"\n            ];\n            const datasets = funds.map((fund, index)=>{\n                const data = [];\n                periods.forEach((period)=>{\n                    const regex = new RegExp(\"\".concat(period, \":\\\\s*(\\\\d+\\\\.?\\\\d*)%\"));\n                    const match = content.match(regex);\n                    data.push(match ? parseFloat(match[1]) : 0);\n                });\n                return {\n                    label: fund,\n                    data,\n                    color: colors[index] || \"#6b7280\"\n                };\n            });\n            const chartData = {\n                labels: periods,\n                datasets\n            };\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mt-3\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ChartComponent__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                    title: \"Multi-Period Performance Analysis\",\n                    data: chartData,\n                    type: \"bar\"\n                }, void 0, false, {\n                    fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                    lineNumber: 252,\n                    columnNumber: 11\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                lineNumber: 251,\n                columnNumber: 9\n            }, undefined);\n        } catch (error) {\n            console.error(\"Error rendering performance chart:\", error);\n        }\n        return null;\n    };\n    // Function to render beautiful fund recommendation cards and clean the content\n    const renderRecommendationChart = (content)=>{\n        console.log(\"\\uD83D\\uDD0D Full content received length:\", content.length);\n        try {\n            // Clean the content first - remove extra whitespace and normalize\n            const cleanContent = content.trim().replace(/\\s+/g, \" \");\n            console.log(\"\\uD83D\\uDD0D Cleaned content sample:\", cleanContent.substring(0, 200) + \"...\");\n            let toolData = null;\n            let jsonStartIndex = -1;\n            let jsonEndIndex = -1;\n            // Strategy 1: Find JSON starting with {\"type\": \"recommendation\"\n            const startIndex = cleanContent.indexOf('{\"type\": \"recommendation\"');\n            if (startIndex !== -1) {\n                console.log(\"\\uD83D\\uDD0D Found JSON start at position:\", startIndex);\n                jsonStartIndex = startIndex;\n                // Find the end of this JSON object by counting braces\n                let braceCount = 0;\n                let endIndex = startIndex;\n                let inString = false;\n                let escapeNext = false;\n                for(let i = startIndex; i < cleanContent.length; i++){\n                    const char = cleanContent[i];\n                    if (escapeNext) {\n                        escapeNext = false;\n                        continue;\n                    }\n                    if (char === \"\\\\\") {\n                        escapeNext = true;\n                        continue;\n                    }\n                    if (char === '\"' && !escapeNext) {\n                        inString = !inString;\n                        continue;\n                    }\n                    if (!inString) {\n                        if (char === \"{\") {\n                            braceCount++;\n                        } else if (char === \"}\") {\n                            braceCount--;\n                            if (braceCount === 0) {\n                                endIndex = i + 1;\n                                jsonEndIndex = endIndex;\n                                break;\n                            }\n                        }\n                    }\n                }\n                if (braceCount === 0 && endIndex > startIndex) {\n                    const jsonString = cleanContent.substring(startIndex, endIndex);\n                    console.log(\"\\uD83D\\uDD0D Extracted JSON string length:\", jsonString.length);\n                    console.log(\"\\uD83D\\uDD0D JSON string preview:\", jsonString.substring(0, 100) + \"...\");\n                    try {\n                        toolData = JSON.parse(jsonString);\n                        console.log(\"✅ Successfully parsed JSON:\", toolData);\n                    } catch (parseError) {\n                        console.log(\"❌ JSON parse error:\", parseError);\n                        console.log(\"❌ Problematic JSON:\", jsonString.substring(0, 500));\n                    }\n                }\n            }\n            // Strategy 2: Manual extraction if JSON parsing fails\n            if (!toolData) {\n                console.log(\"\\uD83D\\uDD0D Trying manual extraction...\");\n                // Look for fund data patterns in the text\n                const fundPattern = /JBS\\s+([^:]+):\\s*NAV\\s*PKR\\s*([\\d.]+),\\s*1Y\\s*Return\\s*([\\d.]+)%/g;\n                const funds = [];\n                let match;\n                while((match = fundPattern.exec(content)) !== null){\n                    const [, name, nav, returnValue] = match;\n                    funds.push({\n                        name: \"JBS \".concat(name.trim(), \" Fund\"),\n                        nav: parseFloat(nav),\n                        performance: {\n                            return_365d: parseFloat(returnValue),\n                            return_ytd: 0\n                        },\n                        fees: {\n                            expense_ratio: 2.0,\n                            management_fee: 1.5\n                        },\n                        details: {\n                            risk_profile: \"High\"\n                        }\n                    });\n                }\n                if (funds.length > 0) {\n                    console.log(\"✅ Manual extraction successful:\", funds);\n                    toolData = {\n                        type: \"recommendation\",\n                        recommended_funds: funds\n                    };\n                }\n            }\n            // If we found valid data, render the chart and return clean content\n            if (toolData && toolData.recommended_funds && Array.isArray(toolData.recommended_funds)) {\n                console.log(\"✅ Rendering chart with\", toolData.recommended_funds.length, \"funds\");\n                // Remove the JSON from the original content\n                let cleanTextContent = content;\n                if (jsonStartIndex !== -1 && jsonEndIndex !== -1) {\n                    cleanTextContent = content.substring(0, jsonStartIndex).trim();\n                    console.log(\"\\uD83E\\uDDF9 Cleaned text content (removed JSON)\");\n                }\n                return {\n                    chart: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mt-3\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_CompactChart__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                            funds: toolData.recommended_funds,\n                            title: \"\\uD83D\\uDCCA Fund Performance\"\n                        }, void 0, false, {\n                            fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                            lineNumber: 388,\n                            columnNumber: 15\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                        lineNumber: 387,\n                        columnNumber: 13\n                    }, undefined),\n                    cleanContent: cleanTextContent\n                };\n            } else {\n                console.log(\"❌ No valid tool data found\");\n                return {\n                    chart: null,\n                    cleanContent: content\n                };\n            }\n            // Fallback: Extract fund data from text content\n            const lines = content.split(\"\\n\");\n            const funds = [];\n            let currentFund = {};\n            lines.forEach((line)=>{\n                const fundMatch = line.match(/^\\d+\\.\\s*(.+?)$/);\n                if (fundMatch) {\n                    if (currentFund.name) {\n                        funds.push(currentFund);\n                    }\n                    currentFund = {\n                        name: fundMatch[1].replace(/\\*\\*/g, \"\"),\n                        performance: {},\n                        fees: {},\n                        details: {\n                            risk_profile: \"High\"\n                        }\n                    };\n                }\n                const navMatch = line.match(/NAV:\\s*PKR\\s*(\\d+\\.?\\d*)/);\n                if (navMatch) {\n                    currentFund.nav = parseFloat(navMatch[1]);\n                }\n                const returnMatch = line.match(/365D Return:\\s*(\\d+\\.?\\d*)%/);\n                if (returnMatch) {\n                    currentFund.performance.return_365d = parseFloat(returnMatch[1]);\n                }\n                const expenseMatch = line.match(/Expense Ratio:\\s*(\\d+\\.?\\d*)%/);\n                if (expenseMatch) {\n                    currentFund.fees.expense_ratio = parseFloat(expenseMatch[1]);\n                }\n            });\n            if (currentFund.name) {\n                funds.push(currentFund);\n            }\n            if (funds.length >= 2) {\n                return {\n                    chart: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mt-3\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_CompactChart__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                            funds: funds,\n                            title: \"\\uD83D\\uDCCA Fund Performance\"\n                        }, void 0, false, {\n                            fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                            lineNumber: 444,\n                            columnNumber: 15\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                        lineNumber: 443,\n                        columnNumber: 13\n                    }, undefined),\n                    cleanContent: content.split(\"\\n\").slice(0, -5).join(\"\\n\").trim() // Remove last few lines with fund details\n                };\n            }\n        } catch (error) {\n            console.error(\"Error rendering recommendation chart:\", error);\n        }\n        return {\n            chart: null,\n            cleanContent: content\n        };\n    };\n    // Function to render market insights\n    const renderMarketInsights = (content)=>{\n        try {\n            const jsonMatch = content.match(/\\{[\\s\\S]*\"type\":\\s*\"market_insights\"[\\s\\S]*\\}/);\n            if (jsonMatch) {\n                const toolData = JSON.parse(jsonMatch[0]);\n                if (toolData.insights && toolData.insights.top_performers) {\n                    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mt-4\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_FundGrid__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                            funds: toolData.insights.top_performers.map((fund)=>({\n                                    name: fund.name,\n                                    nav: fund.nav,\n                                    performance: {\n                                        return_365d: fund.return_365d\n                                    },\n                                    fees: {\n                                        expense_ratio: fund.expense_ratio\n                                    },\n                                    details: {\n                                        risk_profile: fund.risk_profile\n                                    }\n                                })),\n                            title: \"\\uD83D\\uDCCA Top Performing Funds\"\n                        }, void 0, false, {\n                            fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                            lineNumber: 468,\n                            columnNumber: 15\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                        lineNumber: 467,\n                        columnNumber: 13\n                    }, undefined);\n                }\n            }\n        } catch (error) {\n            console.error(\"Error rendering market insights:\", error);\n        }\n        return null;\n    };\n    // Function to render consistency analysis\n    const renderConsistencyAnalysis = (content)=>{\n        try {\n            const jsonMatch = content.match(/\\{[\\s\\S]*\"type\":\\s*\"consistency_analysis\"[\\s\\S]*\\}/);\n            if (jsonMatch) {\n                const toolData = JSON.parse(jsonMatch[0]);\n                if (toolData.consistency_ranking) {\n                    // Convert to SimpleChart format\n                    const funds = toolData.consistency_ranking.map((fund)=>({\n                            name: fund.fund_name,\n                            nav: 100,\n                            performance: {\n                                return_365d: fund.consistency_score * 100 // Convert to percentage\n                            },\n                            fees: {\n                                expense_ratio: 2.0\n                            },\n                            details: {\n                                risk_profile: \"High\"\n                            }\n                        }));\n                    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mt-4\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_SimpleChart__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                            funds: funds,\n                            title: \"\\uD83C\\uDFAF Fund Consistency Scores\"\n                        }, void 0, false, {\n                            fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                            lineNumber: 508,\n                            columnNumber: 15\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                        lineNumber: 507,\n                        columnNumber: 13\n                    }, undefined);\n                }\n            }\n        } catch (error) {\n            console.error(\"Error rendering consistency analysis:\", error);\n        }\n        return null;\n    };\n    // Function to render correlation analysis\n    const renderCorrelationAnalysis = (content)=>{\n        try {\n            const jsonMatch = content.match(/\\{[\\s\\S]*\"type\":\\s*\"correlation_analysis\"[\\s\\S]*\\}/);\n            if (jsonMatch) {\n                const toolData = JSON.parse(jsonMatch[0]);\n                if (toolData.correlation_matrix) {\n                    // Convert to SimpleChart format\n                    const funds = toolData.correlation_matrix.map((item, index)=>({\n                            name: \"\".concat(item.fund1, \" vs \").concat(item.fund2),\n                            nav: 100,\n                            performance: {\n                                return_365d: Math.abs(item.correlation) * 100 // Convert correlation to percentage\n                            },\n                            fees: {\n                                expense_ratio: 2.0\n                            },\n                            details: {\n                                risk_profile: \"Medium\"\n                            }\n                        }));\n                    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mt-4\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_SimpleChart__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                            funds: funds,\n                            title: \"\\uD83D\\uDCCA Fund Correlation Matrix\"\n                        }, void 0, false, {\n                            fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                            lineNumber: 542,\n                            columnNumber: 15\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                        lineNumber: 541,\n                        columnNumber: 13\n                    }, undefined);\n                }\n            }\n        } catch (error) {\n            console.error(\"Error rendering correlation analysis:\", error);\n        }\n        return null;\n    };\n    // Function to render portfolio allocation\n    const renderPortfolioAllocation = (content)=>{\n        try {\n            const jsonMatch = content.match(/\\{[\\s\\S]*\"type\":\\s*\"portfolio\"[\\s\\S]*\\}/);\n            if (jsonMatch) {\n                const toolData = JSON.parse(jsonMatch[0]);\n                console.log(\"Portfolio data:\", toolData);\n                if (toolData.allocation && Array.isArray(toolData.allocation)) {\n                    // Convert to SimpleChart format with correct data mapping\n                    const funds = toolData.allocation.map((item)=>({\n                            name: item.fund_name || \"Unknown Fund\",\n                            nav: parseFloat(item.nav) || 100,\n                            performance: {\n                                return_365d: parseFloat(item.percentage) || 0 // Use percentage as performance metric\n                            },\n                            fees: {\n                                expense_ratio: parseFloat(item.expense_ratio) || 2.0\n                            },\n                            details: {\n                                risk_profile: item.risk_category || \"Medium\",\n                                amount: item.amount || 0,\n                                rationale: item.rationale || \"\"\n                            }\n                        }));\n                    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mt-2 max-w-sm\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_SimpleChart__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                            funds: funds,\n                            title: toolData.title || \"Portfolio Allocation\"\n                        }, void 0, false, {\n                            fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                            lineNumber: 582,\n                            columnNumber: 15\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                        lineNumber: 581,\n                        columnNumber: 13\n                    }, undefined);\n                }\n            }\n        } catch (error) {\n            console.error(\"Error rendering portfolio allocation:\", error);\n        }\n        return null;\n    };\n    // Function to render smart recommendation chart\n    const renderSmartRecommendationChart = (content)=>{\n        try {\n            const jsonMatch = content.match(/\\{[\\s\\S]*\"type\":\\s*\"smart_recommendation\"[\\s\\S]*\\}/);\n            if (jsonMatch) {\n                const toolData = JSON.parse(jsonMatch[0]);\n                if (toolData.recommendations && Array.isArray(toolData.recommendations)) {\n                    // Convert recommendations to fund format for FundGrid\n                    const funds = toolData.recommendations.map((rec)=>({\n                            name: rec.fund.name,\n                            nav: parseFloat(rec.fund.nav) || 0,\n                            performance: {\n                                return_365d: parseFloat(rec.fund.return_365d) || 0,\n                                return_ytd: parseFloat(rec.fund.return_ytd) || 0\n                            },\n                            fees: {\n                                expense_ratio: parseFloat(rec.fund.expense_ratio) || 0,\n                                management_fee: parseFloat(rec.fund.management_fee) || 0\n                            },\n                            details: {\n                                risk_profile: rec.fund.risk_profile || \"Medium\"\n                            }\n                        }));\n                    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mt-4 w-full\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_FundGrid__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                            funds: funds,\n                            title: toolData.title || \"Smart Fund Recommendations\",\n                            className: \"w-full max-w-full\"\n                        }, void 0, false, {\n                            fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                            lineNumber: 622,\n                            columnNumber: 15\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                        lineNumber: 621,\n                        columnNumber: 13\n                    }, undefined);\n                }\n            }\n        } catch (error) {\n            console.error(\"Error rendering smart recommendation chart:\", error);\n        }\n        return null;\n    };\n    // Function to render lead collection form\n    const renderLeadCollectionForm = (content)=>{\n        try {\n            const jsonMatch = content.match(/\\{[\\s\\S]*\"type\":\\s*\"lead_collection\"[\\s\\S]*\\}/);\n            if (jsonMatch) {\n                const toolData = JSON.parse(jsonMatch[0]);\n                const handleSubmit = async (formData)=>{\n                    if (onSendMessage) {\n                        onSendMessage(\"LEAD_SUBMIT: \".concat(JSON.stringify(formData)));\n                    }\n                };\n                const handleDecline = ()=>{\n                    if (onSendMessage) {\n                        onSendMessage(\"LEAD_DECLINE\");\n                    }\n                };\n                const handleClose = ()=>{\n                    if (onSendMessage) {\n                        onSendMessage(\"LEAD_CLOSE\");\n                    }\n                };\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"mt-4 w-full\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_LeadCollectionForm__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                        title: toolData.title,\n                        description: toolData.description,\n                        formFields: toolData.form_fields,\n                        submitText: toolData.submit_text,\n                        privacyNote: toolData.privacy_note,\n                        declineOption: toolData.decline_option,\n                        onSubmit: handleSubmit,\n                        onDecline: handleDecline,\n                        onClose: handleClose\n                    }, void 0, false, {\n                        fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                        lineNumber: 664,\n                        columnNumber: 13\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                    lineNumber: 663,\n                    columnNumber: 11\n                }, undefined);\n            }\n        } catch (error) {\n            console.error(\"Error rendering lead collection form:\", error);\n        }\n        return null;\n    };\n    // Function to clean content by removing JSON data and detailed listings\n    const cleanContentFromJson = (content, responseType)=>{\n        try {\n            // Find JSON object in the content\n            const jsonMatch = content.match(/\\{[\\s\\S]*\"type\":\\s*\"[^\"]+\"[\\s\\S]*\\}/);\n            if (jsonMatch) {\n                const beforeJson = content.substring(0, content.indexOf(jsonMatch[0])).trim();\n                // For recommendation types, always return minimal text regardless of beforeJson\n                if (responseType === \"recommendation\" || responseType === \"smart_recommendation\") {\n                    return responseType === \"recommendation\" ? \"Fund recommendations\" : \"Personalized fund recommendations\";\n                }\n                // Create simplified content based on response type\n                if (responseType === \"comparison\") {\n                    return \"Performance comparison\";\n                } else if (responseType === \"performance_analysis\") {\n                    return \"Performance analysis\";\n                } else if (responseType === \"portfolio\") {\n                    return \"Portfolio allocation\";\n                } else if (responseType === \"market_insights\") {\n                    return \"Market insights\";\n                } else if (responseType === \"lead_collection\") {\n                    return \"Would you like to connect with our investment experts?\";\n                } else if (responseType === \"lead_submitted\") {\n                    return \"Thank you for your interest!\";\n                } else if (responseType === \"lead_declined\") {\n                    return \"No problem at all!\";\n                } else if (responseType === \"lead_collection_declined\") {\n                    return \"I understand your preference.\";\n                } else if (responseType === \"lead_already_submitted\") {\n                    return \"Thank you for your previous submission.\";\n                } else {\n                    // For other types, return the text before JSON or a generic message\n                    return beforeJson || \"Here are your results\";\n                }\n            }\n        } catch (error) {\n            console.error(\"Error cleaning content:\", error);\n        }\n        return content;\n    };\n    // Check if this is a recommendation response and get clean content\n    const recommendationResult = message.response_type === \"recommendation\" ? renderRecommendationChart(message.content) : null;\n    // Clean content for all response types that have JSON data\n    const shouldCleanContent = [\n        \"recommendation\",\n        \"performance_analysis\",\n        \"market_insights\",\n        \"consistency_analysis\",\n        \"correlation_analysis\",\n        \"portfolio\",\n        \"comparison\",\n        \"smart_recommendation\",\n        \"lead_collection\",\n        \"lead_submitted\",\n        \"lead_declined\",\n        \"lead_collection_declined\",\n        \"lead_already_submitted\"\n    ].includes(message.response_type || \"\");\n    const displayContent = (recommendationResult === null || recommendationResult === void 0 ? void 0 : recommendationResult.cleanContent) || (shouldCleanContent ? cleanContentFromJson(message.content, message.response_type || \"\") : message.content);\n    const recommendationChart = (recommendationResult === null || recommendationResult === void 0 ? void 0 : recommendationResult.chart) || null;\n    const formatTime = (timestamp)=>{\n        return new Intl.DateTimeFormat(\"en-US\", {\n            hour: \"2-digit\",\n            minute: \"2-digit\",\n            hour12: true\n        }).format(new Date(timestamp));\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_motion_framer_motion__WEBPACK_IMPORTED_MODULE_9__.motion.div, {\n        initial: {\n            opacity: 0,\n            y: 20,\n            scale: 0.95\n        },\n        animate: {\n            opacity: 1,\n            y: 0,\n            scale: 1\n        },\n        transition: {\n            duration: 0.3,\n            ease: \"easeOut\"\n        },\n        className: \"flex items-start gap-2 mb-3 \".concat(isUser ? \"flex-row-reverse\" : \"flex-row\"),\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"\\n        flex-shrink-0 w-7 h-7 rounded-full flex items-center justify-center text-white text-sm font-medium\\n        \".concat(isUser ? \"bg-primary-500\" : \"bg-gradient-to-br from-emerald-500 to-emerald-600\", \"\\n      \"),\n                children: isUser ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Bot_User_lucide_react__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n                    size: 14\n                }, void 0, false, {\n                    fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                    lineNumber: 763,\n                    columnNumber: 19\n                }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Bot_User_lucide_react__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n                    size: 14\n                }, void 0, false, {\n                    fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                    lineNumber: 763,\n                    columnNumber: 40\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                lineNumber: 756,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex flex-col \".concat(isUser ? \"items-end\" : \"items-start\", \" max-w-[85%]\"),\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"\\n          chat-message relative max-w-[280px]\\n          \".concat(isUser ? \"chat-message-user\" : \"chat-message-assistant\", \"\\n        \"),\n                        children: isAssistant ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                            children: message.response_type === \"quiz\" ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mt-1 max-w-lg\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(DynamicQuiz, {\n                                    quizData: (()=>{\n                                        try {\n                                            // Extract JSON from message content (it should be appended by backend)\n                                            const jsonMatch = message.content.match(RegExp('\\\\{[^{}]*\"type\"\\\\s*:\\\\s*\"quiz\"[^{}]*\\\\}', \"s\"));\n                                            if (jsonMatch) {\n                                                return JSON.parse(jsonMatch[0]);\n                                            }\n                                            // Fallback: try parsing the entire content as JSON\n                                            return JSON.parse(message.content);\n                                        } catch (e) {\n                                            console.error(\"Failed to parse quiz JSON:\", e);\n                                            return null;\n                                        }\n                                    })(),\n                                    onComplete: (result)=>{\n                                        console.log(\"✅ Quiz completed:\", result);\n                                        // Send the result back to the chat for processing\n                                        if (onSendMessage) {\n                                            onSendMessage(result);\n                                        } else {\n                                            console.error(\"❌ Cannot send message - onSendMessage not provided\");\n                                        }\n                                    }\n                                }, void 0, false, {\n                                    fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                                    lineNumber: 781,\n                                    columnNumber: 19\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                                lineNumber: 780,\n                                columnNumber: 17\n                            }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_markdown__WEBPACK_IMPORTED_MODULE_12__.Markdown, {\n                                        className: \"prose prose-sm max-w-none\",\n                                        components: {\n                                            p: (param)=>{\n                                                let { children } = param;\n                                                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                    className: \"mb-2 last:mb-0\",\n                                                    children: children\n                                                }, void 0, false, {\n                                                    fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                                                    lineNumber: 813,\n                                                    columnNumber: 44\n                                                }, void 0);\n                                            },\n                                            ul: (param)=>{\n                                                let { children } = param;\n                                                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"ul\", {\n                                                    className: \"list-disc list-inside mb-2 space-y-1\",\n                                                    children: children\n                                                }, void 0, false, {\n                                                    fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                                                    lineNumber: 814,\n                                                    columnNumber: 45\n                                                }, void 0);\n                                            },\n                                            ol: (param)=>{\n                                                let { children } = param;\n                                                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"ol\", {\n                                                    className: \"list-decimal list-inside mb-2 space-y-1\",\n                                                    children: children\n                                                }, void 0, false, {\n                                                    fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                                                    lineNumber: 815,\n                                                    columnNumber: 45\n                                                }, void 0);\n                                            },\n                                            li: (param)=>{\n                                                let { children } = param;\n                                                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                                    className: \"text-sm\",\n                                                    children: children\n                                                }, void 0, false, {\n                                                    fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                                                    lineNumber: 816,\n                                                    columnNumber: 45\n                                                }, void 0);\n                                            },\n                                            strong: (param)=>{\n                                                let { children } = param;\n                                                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"strong\", {\n                                                    className: \"font-semibold text-gray-900\",\n                                                    children: children\n                                                }, void 0, false, {\n                                                    fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                                                    lineNumber: 817,\n                                                    columnNumber: 49\n                                                }, void 0);\n                                            },\n                                            em: (param)=>{\n                                                let { children } = param;\n                                                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"em\", {\n                                                    className: \"italic\",\n                                                    children: children\n                                                }, void 0, false, {\n                                                    fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                                                    lineNumber: 818,\n                                                    columnNumber: 45\n                                                }, void 0);\n                                            },\n                                            code: (param)=>{\n                                                let { children } = param;\n                                                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"code\", {\n                                                    className: \"px-1 py-0.5 bg-gray-100 rounded text-xs font-mono\",\n                                                    children: children\n                                                }, void 0, false, {\n                                                    fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                                                    lineNumber: 820,\n                                                    columnNumber: 25\n                                                }, void 0);\n                                            }\n                                        },\n                                        children: displayContent\n                                    }, void 0, false, {\n                                        fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                                        lineNumber: 810,\n                                        columnNumber: 19\n                                    }, undefined),\n                                    message.response_type === \"comparison\" && renderComparisonChart(message.content),\n                                    message.response_type === \"performance_analysis\" && renderPerformanceChart(message.content),\n                                    message.response_type === \"recommendation\" && recommendationChart,\n                                    message.response_type === \"smart_recommendation\" && renderSmartRecommendationChart(message.content),\n                                    message.response_type === \"market_insights\" && renderMarketInsights(message.content),\n                                    message.response_type === \"consistency_analysis\" && renderConsistencyAnalysis(message.content),\n                                    message.response_type === \"correlation_analysis\" && renderCorrelationAnalysis(message.content),\n                                    message.response_type === \"portfolio\" && renderPortfolioAllocation(message.content),\n                                    message.response_type === \"lead_collection\" && renderLeadCollectionForm(message.content)\n                                ]\n                            }, void 0, true)\n                        }, void 0, false) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                            children: !message.content.startsWith(\"Risk Profile Complete:\") && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"whitespace-pre-wrap\",\n                                children: message.content\n                            }, void 0, false, {\n                                fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                                lineNumber: 846,\n                                columnNumber: 17\n                            }, undefined)\n                        }, void 0, false)\n                    }, void 0, false, {\n                        fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                        lineNumber: 769,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-xs text-gray-500 mt-1 \".concat(isUser ? \"text-right\" : \"text-left\"),\n                        children: [\n                            formatTime(message.timestamp),\n                            message.response_type && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"ml-2 px-2 py-0.5 bg-blue-100 text-blue-700 rounded text-xs\",\n                                children: message.response_type\n                            }, void 0, false, {\n                                fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                                lineNumber: 856,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                        lineNumber: 853,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n                lineNumber: 767,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"D:\\\\AMC_Chatbot\\\\front-end\\\\src\\\\components\\\\ChatWidget\\\\MessageBubble.tsx\",\n        lineNumber: 749,\n        columnNumber: 5\n    }, undefined);\n};\n_c1 = MessageBubble;\n/* harmony default export */ __webpack_exports__[\"default\"] = (MessageBubble);\nvar _c, _c1;\n$RefreshReg$(_c, \"DynamicQuiz\");\n$RefreshReg$(_c1, \"MessageBubble\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9jb21wb25lbnRzL0NoYXRXaWRnZXQvTWVzc2FnZUJ1YmJsZS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFd0M7QUFDRDtBQUVFO0FBQ0U7QUFFRDtBQUNJO0FBQ1I7QUFDSjtBQUNNO0FBQ0U7QUFDWTtBQWN0RCxNQUFNYSxjQUEwQztRQUFDLEVBQUVDLFFBQVEsRUFBRUMsVUFBVSxFQUFFOztJQUN2RSxNQUFNLENBQUNDLHNCQUFzQkMsd0JBQXdCLEdBQUdoQiwrQ0FBUUEsQ0FBQztJQUNqRSxNQUFNLENBQUNpQixTQUFTQyxXQUFXLEdBQUdsQiwrQ0FBUUEsQ0FBMkIsQ0FBQztJQUVsRSxJQUFJLENBQUNhLFlBQVksQ0FBQ0EsU0FBU00sU0FBUyxFQUFFO1FBQ3BDLHFCQUFPLDhEQUFDQztZQUFJQyxXQUFVO3NCQUFlOzs7Ozs7SUFDdkM7SUFFQSxNQUFNRixZQUFZTixTQUFTTSxTQUFTO0lBQ3BDLE1BQU1HLGtCQUFrQkgsU0FBUyxDQUFDSixxQkFBcUI7SUFFdkQseURBQXlEO0lBQ3pELE1BQU1RLG9CQUFvQjtRQUN4QkMsSUFBSUYsZ0JBQWdCRSxFQUFFO1FBQ3RCQyxVQUFVSCxnQkFBZ0JJLElBQUk7UUFDOUJDLE1BQU07UUFDTkMsU0FBU04sZ0JBQWdCTSxPQUFPLENBQUNDLEdBQUcsQ0FBQyxDQUFDQyxRQUFnQkMsUUFBbUI7Z0JBQ3ZFUCxJQUFJLFVBQWdCLE9BQU5PO2dCQUNkTCxNQUFNSTtnQkFDTkUsT0FBT0Y7WUFDVDtJQUNGO0lBRUEsTUFBTUcsZUFBZSxDQUFDQyxZQUFvQkM7UUFDeEMsTUFBTUMsYUFBYTtZQUFFLEdBQUduQixPQUFPO1lBQUUsQ0FBQ2lCLFdBQVcsRUFBRUM7UUFBZ0I7UUFDL0RqQixXQUFXa0I7UUFFWCxvQ0FBb0M7UUFDcEMsSUFBSXJCLHVCQUF1QkksVUFBVWtCLE1BQU0sR0FBRyxHQUFHO1lBQy9DckIsd0JBQXdCRCx1QkFBdUI7UUFDakQsT0FBTztZ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QUFPO29DQUNsR1AsUUFBUXVJLGFBQWEsS0FBSyxxQkFBcUIzQyxxQkFBcUI1RixRQUFRTyxPQUFPO29DQUNuRlAsUUFBUXVJLGFBQWEsS0FBSywwQkFBMEJ4QywwQkFBMEIvRixRQUFRTyxPQUFPO29DQUM3RlAsUUFBUXVJLGFBQWEsS0FBSywwQkFBMEJyQywwQkFBMEJsRyxRQUFRTyxPQUFPO29DQUM3RlAsUUFBUXVJLGFBQWEsS0FBSyxlQUFlOUIsMEJBQTBCekcsUUFBUU8sT0FBTztvQ0FDbEZQLFFBQVF1SSxhQUFhLEtBQUsscUJBQXFCckIseUJBQXlCbEgsUUFBUU8sT0FBTzs7OzBEQUs5RjtzQ0FFRyxDQUFDUCxRQUFRTyxPQUFPLENBQUNpSyxVQUFVLENBQUMsMkNBQzNCLDhEQUFDakw7Z0NBQUV0QyxXQUFVOzBDQUF1QitDLFFBQVFPLE9BQU87Ozs7Ozs7Ozs7OztrQ0FPM0QsOERBQUN2RDt3QkFBSUMsV0FBVyw4QkFBa0UsT0FBcENrRCxTQUFTLGVBQWU7OzRCQUNuRXlJLFdBQVc1SSxRQUFRNkksU0FBUzs0QkFDNUI3SSxRQUFRdUksYUFBYSxrQkFDcEIsOERBQUM5STtnQ0FBS3hDLFdBQVU7MENBQ2IrQyxRQUFRdUksYUFBYTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBT3BDO01BbHVCTXhJO0FBb3VCTiwrREFBZUEsYUFBYUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9zcmMvY29tcG9uZW50cy9DaGF0V2lkZ2V0L01lc3NhZ2VCdWJibGUudHN4PzhhYTQiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnO1xuXG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBtb3Rpb24gfSBmcm9tICdmcmFtZXItbW90aW9uJztcbmltcG9ydCB7IENoYXRNZXNzYWdlIH0gZnJvbSAnQC90eXBlcy9jaGF0JztcbmltcG9ydCB7IEJvdCwgVXNlciB9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7XG5pbXBvcnQgUmVhY3RNYXJrZG93biBmcm9tICdyZWFjdC1tYXJrZG93bic7XG5pbXBvcnQgUmlza1Byb2ZpbGVNQ1EgZnJvbSAnLi9SaXNrUHJvZmlsZU1DUSc7XG5pbXBvcnQgTUNRQ29tcG9uZW50IGZyb20gJy4vTUNRQ29tcG9uZW50JztcbmltcG9ydCBDaGFydENvbXBvbmVudCBmcm9tICcuL0NoYXJ0Q29tcG9uZW50JztcbmltcG9ydCBHYW50dENoYXJ0IGZyb20gJy4vR2FudHRDaGFydCc7XG5pbXBvcnQgRnVuZEdyaWQgZnJvbSAnLi9GdW5kR3JpZCc7XG5pbXBvcnQgU2ltcGxlQ2hhcnQgZnJvbSAnLi9TaW1wbGVDaGFydCc7XG5pbXBvcnQgQ29tcGFjdENoYXJ0IGZyb20gJy4vQ29tcGFjdENoYXJ0JztcbmltcG9ydCBMZWFkQ29sbGVjdGlvbkZvcm0gZnJvbSAnLi9MZWFkQ29sbGVjdGlvbkZvcm0nO1xuXG5pbnRlcmZhY2UgTWVzc2FnZUJ1YmJsZVByb3BzIHtcbiAgbWVzc2FnZTogQ2hhdE1lc3NhZ2U7XG4gIGlzTGF0ZXN0PzogYm9vbGVhbjtcbiAgb25TZW5kTWVzc2FnZT86IChjb250ZW50OiBzdHJpbmcpID0+IHZvaWQ7XG59XG5cbi8vIER5bmFtaWMgUXVpeiBDb21wb25lbnQgZm9yIGJhY2tlbmQgcXVpeiBkYXRhXG5pbnRlcmZhY2UgRHluYW1pY1F1aXpQcm9wcyB7XG4gIHF1aXpEYXRhOiBhbnk7XG4gIG9uQ29tcGxldGU6IChyZXN1bHQ6IHN0cmluZykgPT4gdm9pZDtcbn1cblxuY29uc3QgRHluYW1pY1F1aXo6IFJlYWN0LkZDPER5bmFtaWNRdWl6UHJvcHM+ID0gKHsgcXVpekRhdGEsIG9uQ29tcGxldGUgfSkgPT4ge1xuICBjb25zdCBbY3VycmVudFF1ZXN0aW9uSW5kZXgsIHNldEN1cnJlbnRRdWVzdGlvbkluZGV4XSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCBbYW5zd2Vycywgc2V0QW5zd2Vyc10gPSB1c2VTdGF0ZTxSZWNvcmQ8c3RyaW5nLCBzdHJpbmdbXT4+KHt9KTtcbiAgXG4gIGlmICghcXVpekRhdGEgfHwgIXF1aXpEYXRhLnF1ZXN0aW9ucykge1xuICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cInRleHQtcmVkLTUwMFwiPkludmFsaWQgcXVpeiBkYXRhPC9kaXY+O1xuICB9XG5cbiAgY29uc3QgcXVlc3Rpb25zID0gcXVpekRhdGEucXVlc3Rpb25zO1xuICBjb25zdCBjdXJyZW50UXVlc3Rpb24gPSBxdWVzdGlvbnNbY3VycmVudFF1ZXN0aW9uSW5kZXhdO1xuXG4gIC8vIENvbnZlcnQgYmFja2VuZCBxdWVzdGlvbiBmb3JtYXQgdG8gTUNRQ29tcG9uZW50IGZvcm1hdFxuICBjb25zdCBmb3JtYXR0ZWRRdWVzdGlvbiA9IHtcbiAgICBpZDogY3VycmVudFF1ZXN0aW9uLmlkLFxuICAgIHF1ZXN0aW9uOiBjdXJyZW50UXVlc3Rpb24udGV4dCxcbiAgICB0eXBlOiAnc2luZ2xlJyBhcyBjb25zdCxcbiAgICBvcHRpb25zOiBjdXJyZW50UXVlc3Rpb24ub3B0aW9ucy5tYXAoKG9wdGlvbjogc3RyaW5nLCBpbmRleDogbnVtYmVyKSA9PiAoe1xuICAgICAgaWQ6IGBvcHRpb25fJHtpbmRleH1gLFxuICAgICAgdGV4dDogb3B0aW9uLFxuICAgICAgdmFsdWU6IG9wdGlvblxuICAgIH0pKVxuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUFuc3dlciA9IChxdWVzdGlvbklkOiBzdHJpbmcsIHNlbGVjdGVkT3B0aW9uczogc3RyaW5nW10pID0+IHtcbiAgICBjb25zdCBuZXdBbnN3ZXJzID0geyAuLi5hbnN3ZXJzLCBbcXVlc3Rpb25JZF06IHNlbGVjdGVkT3B0aW9ucyB9O1xuICAgIHNldEFuc3dlcnMobmV3QW5zd2Vycyk7XG5cbiAgICAvLyBNb3ZlIHRvIG5leHQgcXVlc3Rpb24gb3IgY29tcGxldGVcbiAgICBpZiAoY3VycmVudFF1ZXN0aW9uSW5kZXggPCBxdWVzdGlvbnMubGVuZ3RoIC0gMSkge1xuICAgICAgc2V0Q3VycmVudFF1ZXN0aW9uSW5kZXgoY3VycmVudFF1ZXN0aW9uSW5kZXggKyAxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQ2FsY3VsYXRlIHJpc2sgc2NvcmUgYmFzZWQgb24gYmFja2VuZCBzY29yaW5nIHN5c3RlbVxuICAgICAgY29uc3QgdG90YWxTY29yZSA9IGNhbGN1bGF0ZVJpc2tTY29yZShuZXdBbnN3ZXJzLCBxdWVzdGlvbnMpO1xuICAgICAgY29uc3Qgcmlza0xldmVsID0gZ2V0Umlza0xldmVsKHRvdGFsU2NvcmUsIHF1aXpEYXRhLnNjb3JpbmcpO1xuICAgICAgXG4gICAgICAvLyBTZW5kIHJlc3VsdCBiYWNrIHRvIGNoYXRcbiAgICAgIG9uQ29tcGxldGUoYFJpc2sgQXNzZXNzbWVudCBDb21wbGV0ZTogJHtyaXNrTGV2ZWx9IHByb2ZpbGUgZGV0ZXJtaW5lZCBiYXNlZCBvbiB5b3VyIHJlc3BvbnNlcy5gKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgY2FsY3VsYXRlUmlza1Njb3JlID0gKGFuc3dlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZ1tdPiwgcXVlc3Rpb25zOiBhbnlbXSkgPT4ge1xuICAgIGxldCBzY29yZSA9IDA7XG4gICAgcXVlc3Rpb25zLmZvckVhY2goKHF1ZXN0aW9uLCBpbmRleCkgPT4ge1xuICAgICAgY29uc3QgYW5zd2VyID0gYW5zd2Vyc1txdWVzdGlvbi5pZF07XG4gICAgICBpZiAoYW5zd2VyICYmIGFuc3dlci5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIFNjb3JlIGJhc2VkIG9uIG9wdGlvbiBwb3NpdGlvbiAoMS00IHBvaW50cyBwZXIgcXVlc3Rpb24pXG4gICAgICAgIGNvbnN0IG9wdGlvbkluZGV4ID0gcXVlc3Rpb24ub3B0aW9ucy5pbmRleE9mKGFuc3dlclswXSk7XG4gICAgICAgIHNjb3JlICs9IG9wdGlvbkluZGV4ICsgMTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gc2NvcmU7XG4gIH07XG5cbiAgY29uc3QgZ2V0Umlza0xldmVsID0gKHNjb3JlOiBudW1iZXIsIHNjb3Jpbmc6IGFueSkgPT4ge1xuICAgIGZvciAoY29uc3QgW3JhbmdlLCBsZXZlbF0gb2YgT2JqZWN0LmVudHJpZXMoc2NvcmluZykpIHtcbiAgICAgIGNvbnN0IFttaW4sIG1heF0gPSByYW5nZS5zcGxpdCgnLScpLm1hcChOdW1iZXIpO1xuICAgICAgaWYgKHNjb3JlID49IG1pbiAmJiBzY29yZSA8PSBtYXgpIHtcbiAgICAgICAgcmV0dXJuIGxldmVsO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gJ01lZGl1bSBSaXNrJzsgLy8gRGVmYXVsdCBmYWxsYmFja1xuICB9O1xuXG4gIGNvbnN0IHByb2dyZXNzID0gKChjdXJyZW50UXVlc3Rpb25JbmRleCArIDEpIC8gcXVlc3Rpb25zLmxlbmd0aCkgKiAxMDA7XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIHJvdW5kZWQtbGcgcC00IGJvcmRlciBib3JkZXItZ3JheS0yMDBcIj5cbiAgICAgIHsvKiBRdWl6IEhlYWRlciAqL31cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNFwiPlxuICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC1sZyBmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDBcIj57cXVpekRhdGEudGl0bGV9PC9oMz5cbiAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LWdyYXktNjAwIG10LTFcIj57cXVpekRhdGEuZGVzY3JpcHRpb259PC9wPlxuICAgICAgICBcbiAgICAgICAgey8qIFByb2dyZXNzIEJhciAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0zXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiB0ZXh0LXhzIHRleHQtZ3JheS01MDAgbWItMVwiPlxuICAgICAgICAgICAgPHNwYW4+UXVlc3Rpb24ge2N1cnJlbnRRdWVzdGlvbkluZGV4ICsgMX0gb2Yge3F1ZXN0aW9ucy5sZW5ndGh9PC9zcGFuPlxuICAgICAgICAgICAgPHNwYW4+e01hdGgucm91bmQocHJvZ3Jlc3MpfSU8L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctZ3JheS0yMDAgcm91bmRlZC1mdWxsIGgtMlwiPlxuICAgICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYmctYmx1ZS02MDAgaC0yIHJvdW5kZWQtZnVsbCB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0zMDBcIlxuICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogYCR7cHJvZ3Jlc3N9JWAgfX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIHsvKiBDdXJyZW50IFF1ZXN0aW9uICovfVxuICAgICAgPE1DUUNvbXBvbmVudFxuICAgICAgICBxdWVzdGlvbj17Zm9ybWF0dGVkUXVlc3Rpb259XG4gICAgICAgIG9uQW5zd2VyPXtoYW5kbGVBbnN3ZXJ9XG4gICAgICAgIGNsYXNzTmFtZT1cIm1iLTBcIlxuICAgICAgLz5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbmNvbnN0IE1lc3NhZ2VCdWJibGU6IFJlYWN0LkZDPE1lc3NhZ2VCdWJibGVQcm9wcz4gPSAoeyBtZXNzYWdlLCBpc0xhdGVzdCA9IGZhbHNlLCBvblNlbmRNZXNzYWdlIH0pID0+IHtcbiAgY29uc3QgaXNVc2VyID0gbWVzc2FnZS5yb2xlID09PSAndXNlcic7XG4gIGNvbnN0IGlzQXNzaXN0YW50ID0gbWVzc2FnZS5yb2xlID09PSAnYXNzaXN0YW50JztcblxuICAvLyBGdW5jdGlvbiB0byBwYXJzZSBhbmQgcmVuZGVyIGNvbXBhcmlzb24gY2hhcnRzXG4gIGNvbnN0IHJlbmRlckNvbXBhcmlzb25DaGFydCA9IChjb250ZW50OiBzdHJpbmcpID0+IHtcbiAgICB0cnkge1xuICAgICAgLy8gVHJ5IHRvIGV4dHJhY3Qgc3RydWN0dXJlZCBkYXRhIGZpcnN0IChmcm9tIHRvb2wgSlNPTiByZXNwb25zZSlcbiAgICAgIGNvbnN0IGpzb25NYXRjaCA9IGNvbnRlbnQubWF0Y2goL1xce1tcXHNcXFNdKlwidHlwZVwiOlxccypcImNvbXBhcmlzb25cIltcXHNcXFNdKlxcfS8pO1xuICAgICAgaWYgKGpzb25NYXRjaCkge1xuICAgICAgICBjb25zdCB0b29sRGF0YSA9IEpTT04ucGFyc2UoanNvbk1hdGNoWzBdKTtcbiAgICAgICAgaWYgKHRvb2xEYXRhLmRhdGEgJiYgQXJyYXkuaXNBcnJheSh0b29sRGF0YS5kYXRhKSkge1xuICAgICAgICAgIC8vIEV4dHJhY3QgbWV0cmljIGZyb20gdGhlIGRhdGEgc3RydWN0dXJlXG4gICAgICAgICAgY29uc3QgZmlyc3RJdGVtID0gdG9vbERhdGEuZGF0YVswXTtcbiAgICAgICAgICBjb25zdCBtZXRyaWMgPSBPYmplY3Qua2V5cyhmaXJzdEl0ZW0pLmZpbmQoa2V5ID0+IGtleSAhPT0gJ0Z1bmQgTmFtZScpIHx8ICdQZXJmb3JtYW5jZSc7XG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtNCB3LWZ1bGxcIj5cbiAgICAgICAgICAgICAgPEdhbnR0Q2hhcnRcbiAgICAgICAgICAgICAgICB0aXRsZT17dG9vbERhdGEudGl0bGUgfHwgXCJGdW5kIFBlcmZvcm1hbmNlIENvbXBhcmlzb25cIn1cbiAgICAgICAgICAgICAgICBkYXRhPXt0b29sRGF0YS5kYXRhfVxuICAgICAgICAgICAgICAgIG1ldHJpYz17bWV0cmljfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBtYXgtdy1mdWxsXCJcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gRmFsbGJhY2s6IEV4dHJhY3QgZnVuZCBkYXRhIGZyb20gdGV4dCBjb250ZW50XG4gICAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuICAgICAgY29uc3QgZnVuZERhdGE6IEFycmF5PHtba2V5OiBzdHJpbmddOiBzdHJpbmcgfCBudW1iZXJ9PiA9IFtdO1xuICAgICAgbGV0IG1ldHJpYyA9ICczNjVEIFJldHVybic7XG4gICAgICBcbiAgICAgIGxpbmVzLmZvckVhY2gobGluZSA9PiB7XG4gICAgICAgIGNvbnN0IG1hdGNoID0gbGluZS5tYXRjaCgvKC4rPyk6XFxzKihcXGQrXFwuP1xcZCopJS8pO1xuICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICBjb25zdCBbLCBmdW5kTmFtZSwgdmFsdWVdID0gbWF0Y2g7XG4gICAgICAgICAgZnVuZERhdGEucHVzaCh7XG4gICAgICAgICAgICAnRnVuZCBOYW1lJzogZnVuZE5hbWUudHJpbSgpLFxuICAgICAgICAgICAgW21ldHJpY106IHBhcnNlRmxvYXQodmFsdWUpXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAoZnVuZERhdGEubGVuZ3RoID49IDIpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTQgdy1mdWxsXCI+XG4gICAgICAgICAgICA8R2FudHRDaGFydFxuICAgICAgICAgICAgICB0aXRsZT1cIkZ1bmQgUGVyZm9ybWFuY2UgQ29tcGFyaXNvblwiXG4gICAgICAgICAgICAgIGRhdGE9e2Z1bmREYXRhIGFzIGFueX1cbiAgICAgICAgICAgICAgbWV0cmljPXttZXRyaWN9XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBtYXgtdy1mdWxsXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlbmRlcmluZyBjb21wYXJpc29uIGNoYXJ0OicsIGVycm9yKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgLy8gRnVuY3Rpb24gdG8gcmVuZGVyIHBlcmZvcm1hbmNlIGFuYWx5c2lzIGNoYXJ0c1xuICBjb25zdCByZW5kZXJQZXJmb3JtYW5jZUNoYXJ0ID0gKGNvbnRlbnQ6IHN0cmluZykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBUcnkgdG8gZXh0cmFjdCBzdHJ1Y3R1cmVkIGRhdGEgZmlyc3QgKGZyb20gdG9vbCBKU09OIHJlc3BvbnNlKVxuICAgICAgY29uc3QganNvbk1hdGNoID0gY29udGVudC5tYXRjaCgvXFx7W1xcc1xcU10qXCJ0eXBlXCI6XFxzKlwicGVyZm9ybWFuY2VfYW5hbHlzaXNcIltcXHNcXFNdKlxcfS8pO1xuICAgICAgaWYgKGpzb25NYXRjaCkge1xuICAgICAgICBjb25zdCB0b29sRGF0YSA9IEpTT04ucGFyc2UoanNvbk1hdGNoWzBdKTtcbiAgICAgICAgaWYgKHRvb2xEYXRhLmNoYXJ0X2RhdGEgJiYgdG9vbERhdGEuY2hhcnRfZGF0YS5zZXJpZXMpIHtcbiAgICAgICAgICBjb25zdCBwZXJpb2RzID0gQXJyYXkuaXNBcnJheSh0b29sRGF0YS5jaGFydF9kYXRhLnhBeGlzKSA/IHRvb2xEYXRhLmNoYXJ0X2RhdGEueEF4aXMgOiBbXTtcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC00IHctZnVsbFwiPlxuICAgICAgICAgICAgICA8Q2hhcnRDb21wb25lbnRcbiAgICAgICAgICAgICAgICB0aXRsZT17dG9vbERhdGEudGl0bGUgfHwgXCJQZXJmb3JtYW5jZSBBbmFseXNpc1wifVxuICAgICAgICAgICAgICAgIGRhdGE9e3tcbiAgICAgICAgICAgICAgICAgIGxhYmVsczogcGVyaW9kcyxcbiAgICAgICAgICAgICAgICAgIGRhdGFzZXRzOiB0b29sRGF0YS5jaGFydF9kYXRhLnNlcmllcy5tYXAoKGZ1bmQ6IGFueSwgaW5kZXg6IG51bWJlcikgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGZ1bmQuZnVuZF9uYW1lLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBwZXJpb2RzLm1hcCgocDogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmF3ID0gKGZ1bmQgYXMgYW55KVtwXTtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBudW0gPSB0eXBlb2YgcmF3ID09PSAnbnVtYmVyJyA/IHJhdyA6IHBhcnNlRmxvYXQoU3RyaW5nKHJhdykpO1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpc05hTihudW0pID8gMCA6IG51bTtcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBbJyMzYjgyZjYnLCAnIzEwYjk4MScsICcjZjU5ZTBiJywgJyNlZjQ0NDQnLCAnIzhiNWNmNiddW2luZGV4XSB8fCAnIzZiNzI4MCdcbiAgICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgdHlwZT1cImJhclwiXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIG1heC13LWZ1bGxcIlxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBGYWxsYmFjazogRXh0cmFjdCBtdWx0aS1wZXJpb2QgcGVyZm9ybWFuY2UgZGF0YSBmcm9tIHRleHRcbiAgICAgIGNvbnN0IGZ1bmRNYXRjaGVzID0gY29udGVudC5tYXRjaCgvKFxcdytcXHMrXFx3K1xccytGdW5kKTovZyk7XG4gICAgICBpZiAoIWZ1bmRNYXRjaGVzIHx8IGZ1bmRNYXRjaGVzLmxlbmd0aCA8IDIpIHJldHVybiBudWxsO1xuXG4gICAgICBjb25zdCBmdW5kcyA9IGZ1bmRNYXRjaGVzLm1hcChmID0+IGYucmVwbGFjZSgnOicsICcnKS50cmltKCkpO1xuICAgICAgY29uc3QgcGVyaW9kcyA9IFsnMzY1RCcsICcyWScsICczWSddO1xuICAgICAgY29uc3QgY29sb3JzID0gWycjM2I4MmY2JywgJyMxMGI5ODEnLCAnI2Y1OWUwYiddO1xuICAgICAgXG4gICAgICBjb25zdCBkYXRhc2V0cyA9IGZ1bmRzLm1hcCgoZnVuZCwgaW5kZXgpID0+IHtcbiAgICAgICAgY29uc3QgZGF0YTogbnVtYmVyW10gPSBbXTtcbiAgICAgICAgcGVyaW9kcy5mb3JFYWNoKHBlcmlvZCA9PiB7XG4gICAgICAgICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKGAke3BlcmlvZH06XFxcXHMqKFxcXFxkK1xcXFwuP1xcXFxkKiklYCk7XG4gICAgICAgICAgY29uc3QgbWF0Y2ggPSBjb250ZW50Lm1hdGNoKHJlZ2V4KTtcbiAgICAgICAgICBkYXRhLnB1c2gobWF0Y2ggPyBwYXJzZUZsb2F0KG1hdGNoWzFdKSA6IDApO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbGFiZWw6IGZ1bmQsXG4gICAgICAgICAgZGF0YSxcbiAgICAgICAgICBjb2xvcjogY29sb3JzW2luZGV4XSB8fCAnIzZiNzI4MCdcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBjaGFydERhdGEgPSB7XG4gICAgICAgIGxhYmVsczogcGVyaW9kcyxcbiAgICAgICAgZGF0YXNldHNcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtM1wiPlxuICAgICAgICAgIDxDaGFydENvbXBvbmVudFxuICAgICAgICAgICAgdGl0bGU9XCJNdWx0aS1QZXJpb2QgUGVyZm9ybWFuY2UgQW5hbHlzaXNcIlxuICAgICAgICAgICAgZGF0YT17Y2hhcnREYXRhfVxuICAgICAgICAgICAgdHlwZT1cImJhclwiXG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZW5kZXJpbmcgcGVyZm9ybWFuY2UgY2hhcnQ6JywgZXJyb3IpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICAvLyBGdW5jdGlvbiB0byByZW5kZXIgYmVhdXRpZnVsIGZ1bmQgcmVjb21tZW5kYXRpb24gY2FyZHMgYW5kIGNsZWFuIHRoZSBjb250ZW50XG4gIGNvbnN0IHJlbmRlclJlY29tbWVuZGF0aW9uQ2hhcnQgPSAoY29udGVudDogc3RyaW5nKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ/CflI0gRnVsbCBjb250ZW50IHJlY2VpdmVkIGxlbmd0aDonLCBjb250ZW50Lmxlbmd0aCk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIENsZWFuIHRoZSBjb250ZW50IGZpcnN0IC0gcmVtb3ZlIGV4dHJhIHdoaXRlc3BhY2UgYW5kIG5vcm1hbGl6ZVxuICAgICAgY29uc3QgY2xlYW5Db250ZW50ID0gY29udGVudC50cmltKCkucmVwbGFjZSgvXFxzKy9nLCAnICcpO1xuICAgICAgY29uc29sZS5sb2coJ/CflI0gQ2xlYW5lZCBjb250ZW50IHNhbXBsZTonLCBjbGVhbkNvbnRlbnQuc3Vic3RyaW5nKDAsIDIwMCkgKyAnLi4uJyk7XG4gICAgICBcbiAgICAgIGxldCB0b29sRGF0YSA9IG51bGw7XG4gICAgICBsZXQganNvblN0YXJ0SW5kZXggPSAtMTtcbiAgICAgIGxldCBqc29uRW5kSW5kZXggPSAtMTtcbiAgICAgIFxuICAgICAgLy8gU3RyYXRlZ3kgMTogRmluZCBKU09OIHN0YXJ0aW5nIHdpdGgge1widHlwZVwiOiBcInJlY29tbWVuZGF0aW9uXCJcbiAgICAgIGNvbnN0IHN0YXJ0SW5kZXggPSBjbGVhbkNvbnRlbnQuaW5kZXhPZigne1widHlwZVwiOiBcInJlY29tbWVuZGF0aW9uXCInKTtcbiAgICAgIGlmIChzdGFydEluZGV4ICE9PSAtMSkge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+UjSBGb3VuZCBKU09OIHN0YXJ0IGF0IHBvc2l0aW9uOicsIHN0YXJ0SW5kZXgpO1xuICAgICAgICBqc29uU3RhcnRJbmRleCA9IHN0YXJ0SW5kZXg7XG4gICAgICAgIFxuICAgICAgICAvLyBGaW5kIHRoZSBlbmQgb2YgdGhpcyBKU09OIG9iamVjdCBieSBjb3VudGluZyBicmFjZXNcbiAgICAgICAgbGV0IGJyYWNlQ291bnQgPSAwO1xuICAgICAgICBsZXQgZW5kSW5kZXggPSBzdGFydEluZGV4O1xuICAgICAgICBsZXQgaW5TdHJpbmcgPSBmYWxzZTtcbiAgICAgICAgbGV0IGVzY2FwZU5leHQgPSBmYWxzZTtcbiAgICAgICAgXG4gICAgICAgIGZvciAobGV0IGkgPSBzdGFydEluZGV4OyBpIDwgY2xlYW5Db250ZW50Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY29uc3QgY2hhciA9IGNsZWFuQ29udGVudFtpXTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoZXNjYXBlTmV4dCkge1xuICAgICAgICAgICAgZXNjYXBlTmV4dCA9IGZhbHNlO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGlmIChjaGFyID09PSAnXFxcXCcpIHtcbiAgICAgICAgICAgIGVzY2FwZU5leHQgPSB0cnVlO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGlmIChjaGFyID09PSAnXCInICYmICFlc2NhcGVOZXh0KSB7XG4gICAgICAgICAgICBpblN0cmluZyA9ICFpblN0cmluZztcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoIWluU3RyaW5nKSB7XG4gICAgICAgICAgICBpZiAoY2hhciA9PT0gJ3snKSB7XG4gICAgICAgICAgICAgIGJyYWNlQ291bnQrKztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2hhciA9PT0gJ30nKSB7XG4gICAgICAgICAgICAgIGJyYWNlQ291bnQtLTtcbiAgICAgICAgICAgICAgaWYgKGJyYWNlQ291bnQgPT09IDApIHtcbiAgICAgICAgICAgICAgICBlbmRJbmRleCA9IGkgKyAxO1xuICAgICAgICAgICAgICAgIGpzb25FbmRJbmRleCA9IGVuZEluZGV4O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoYnJhY2VDb3VudCA9PT0gMCAmJiBlbmRJbmRleCA+IHN0YXJ0SW5kZXgpIHtcbiAgICAgICAgICBjb25zdCBqc29uU3RyaW5nID0gY2xlYW5Db250ZW50LnN1YnN0cmluZyhzdGFydEluZGV4LCBlbmRJbmRleCk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ/CflI0gRXh0cmFjdGVkIEpTT04gc3RyaW5nIGxlbmd0aDonLCBqc29uU3RyaW5nLmxlbmd0aCk7XG4gICAgICAgICAgY29uc29sZS5sb2coJ/CflI0gSlNPTiBzdHJpbmcgcHJldmlldzonLCBqc29uU3RyaW5nLnN1YnN0cmluZygwLCAxMDApICsgJy4uLicpO1xuICAgICAgICAgIFxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0b29sRGF0YSA9IEpTT04ucGFyc2UoanNvblN0cmluZyk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn4pyFIFN1Y2Nlc3NmdWxseSBwYXJzZWQgSlNPTjonLCB0b29sRGF0YSk7XG4gICAgICAgICAgfSBjYXRjaCAocGFyc2VFcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ+KdjCBKU09OIHBhcnNlIGVycm9yOicsIHBhcnNlRXJyb3IpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ+KdjCBQcm9ibGVtYXRpYyBKU09OOicsIGpzb25TdHJpbmcuc3Vic3RyaW5nKDAsIDUwMCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBTdHJhdGVneSAyOiBNYW51YWwgZXh0cmFjdGlvbiBpZiBKU09OIHBhcnNpbmcgZmFpbHNcbiAgICAgIGlmICghdG9vbERhdGEpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ/CflI0gVHJ5aW5nIG1hbnVhbCBleHRyYWN0aW9uLi4uJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBMb29rIGZvciBmdW5kIGRhdGEgcGF0dGVybnMgaW4gdGhlIHRleHRcbiAgICAgICAgY29uc3QgZnVuZFBhdHRlcm4gPSAvSkJTXFxzKyhbXjpdKyk6XFxzKk5BVlxccypQS1JcXHMqKFtcXGQuXSspLFxccyoxWVxccypSZXR1cm5cXHMqKFtcXGQuXSspJS9nO1xuICAgICAgICBjb25zdCBmdW5kcyA9IFtdO1xuICAgICAgICBsZXQgbWF0Y2g7XG4gICAgICAgIFxuICAgICAgICB3aGlsZSAoKG1hdGNoID0gZnVuZFBhdHRlcm4uZXhlYyhjb250ZW50KSkgIT09IG51bGwpIHtcbiAgICAgICAgICBjb25zdCBbLCBuYW1lLCBuYXYsIHJldHVyblZhbHVlXSA9IG1hdGNoO1xuICAgICAgICAgIGZ1bmRzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogYEpCUyAke25hbWUudHJpbSgpfSBGdW5kYCxcbiAgICAgICAgICAgIG5hdjogcGFyc2VGbG9hdChuYXYpLFxuICAgICAgICAgICAgcGVyZm9ybWFuY2U6IHtcbiAgICAgICAgICAgICAgcmV0dXJuXzM2NWQ6IHBhcnNlRmxvYXQocmV0dXJuVmFsdWUpLFxuICAgICAgICAgICAgICByZXR1cm5feXRkOiAwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZmVlczoge1xuICAgICAgICAgICAgICBleHBlbnNlX3JhdGlvOiAyLjAsXG4gICAgICAgICAgICAgIG1hbmFnZW1lbnRfZmVlOiAxLjVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgICAgIHJpc2tfcHJvZmlsZTogJ0hpZ2gnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChmdW5kcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ+KchSBNYW51YWwgZXh0cmFjdGlvbiBzdWNjZXNzZnVsOicsIGZ1bmRzKTtcbiAgICAgICAgICB0b29sRGF0YSA9IHtcbiAgICAgICAgICAgIHR5cGU6ICdyZWNvbW1lbmRhdGlvbicsXG4gICAgICAgICAgICByZWNvbW1lbmRlZF9mdW5kczogZnVuZHNcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIElmIHdlIGZvdW5kIHZhbGlkIGRhdGEsIHJlbmRlciB0aGUgY2hhcnQgYW5kIHJldHVybiBjbGVhbiBjb250ZW50XG4gICAgICBpZiAodG9vbERhdGEgJiYgdG9vbERhdGEucmVjb21tZW5kZWRfZnVuZHMgJiYgQXJyYXkuaXNBcnJheSh0b29sRGF0YS5yZWNvbW1lbmRlZF9mdW5kcykpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+KchSBSZW5kZXJpbmcgY2hhcnQgd2l0aCcsIHRvb2xEYXRhLnJlY29tbWVuZGVkX2Z1bmRzLmxlbmd0aCwgJ2Z1bmRzJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBSZW1vdmUgdGhlIEpTT04gZnJvbSB0aGUgb3JpZ2luYWwgY29udGVudFxuICAgICAgICBsZXQgY2xlYW5UZXh0Q29udGVudCA9IGNvbnRlbnQ7XG4gICAgICAgIGlmIChqc29uU3RhcnRJbmRleCAhPT0gLTEgJiYganNvbkVuZEluZGV4ICE9PSAtMSkge1xuICAgICAgICAgIGNsZWFuVGV4dENvbnRlbnQgPSBjb250ZW50LnN1YnN0cmluZygwLCBqc29uU3RhcnRJbmRleCkudHJpbSgpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn6e5IENsZWFuZWQgdGV4dCBjb250ZW50IChyZW1vdmVkIEpTT04pJyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgY2hhcnQ6IChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtM1wiPlxuICAgICAgICAgICAgICA8Q29tcGFjdENoYXJ0IFxuICAgICAgICAgICAgICAgIGZ1bmRzPXt0b29sRGF0YS5yZWNvbW1lbmRlZF9mdW5kc31cbiAgICAgICAgICAgICAgICB0aXRsZT1cIvCfk4ogRnVuZCBQZXJmb3JtYW5jZVwiXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApLFxuICAgICAgICAgIGNsZWFuQ29udGVudDogY2xlYW5UZXh0Q29udGVudFxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+KdjCBObyB2YWxpZCB0b29sIGRhdGEgZm91bmQnKTtcbiAgICAgICAgcmV0dXJuIHsgY2hhcnQ6IG51bGwsIGNsZWFuQ29udGVudDogY29udGVudCB9O1xuICAgICAgfVxuXG4gICAgICAvLyBGYWxsYmFjazogRXh0cmFjdCBmdW5kIGRhdGEgZnJvbSB0ZXh0IGNvbnRlbnRcbiAgICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG4gICAgICBjb25zdCBmdW5kczogYW55W10gPSBbXTtcbiAgICAgIGxldCBjdXJyZW50RnVuZDogYW55ID0ge307XG4gICAgICBcbiAgICAgIGxpbmVzLmZvckVhY2gobGluZSA9PiB7XG4gICAgICAgIGNvbnN0IGZ1bmRNYXRjaCA9IGxpbmUubWF0Y2goL15cXGQrXFwuXFxzKiguKz8pJC8pO1xuICAgICAgICBpZiAoZnVuZE1hdGNoKSB7XG4gICAgICAgICAgaWYgKGN1cnJlbnRGdW5kLm5hbWUpIHtcbiAgICAgICAgICAgIGZ1bmRzLnB1c2goY3VycmVudEZ1bmQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjdXJyZW50RnVuZCA9IHsgXG4gICAgICAgICAgICBuYW1lOiBmdW5kTWF0Y2hbMV0ucmVwbGFjZSgvXFwqXFwqL2csICcnKSxcbiAgICAgICAgICAgIHBlcmZvcm1hbmNlOiB7fSxcbiAgICAgICAgICAgIGZlZXM6IHt9LFxuICAgICAgICAgICAgZGV0YWlsczogeyByaXNrX3Byb2ZpbGU6ICdIaWdoJyB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3QgbmF2TWF0Y2ggPSBsaW5lLm1hdGNoKC9OQVY6XFxzKlBLUlxccyooXFxkK1xcLj9cXGQqKS8pO1xuICAgICAgICBpZiAobmF2TWF0Y2gpIHtcbiAgICAgICAgICBjdXJyZW50RnVuZC5uYXYgPSBwYXJzZUZsb2F0KG5hdk1hdGNoWzFdKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3QgcmV0dXJuTWF0Y2ggPSBsaW5lLm1hdGNoKC8zNjVEIFJldHVybjpcXHMqKFxcZCtcXC4/XFxkKiklLyk7XG4gICAgICAgIGlmIChyZXR1cm5NYXRjaCkge1xuICAgICAgICAgIGN1cnJlbnRGdW5kLnBlcmZvcm1hbmNlLnJldHVybl8zNjVkID0gcGFyc2VGbG9hdChyZXR1cm5NYXRjaFsxXSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGV4cGVuc2VNYXRjaCA9IGxpbmUubWF0Y2goL0V4cGVuc2UgUmF0aW86XFxzKihcXGQrXFwuP1xcZCopJS8pO1xuICAgICAgICBpZiAoZXhwZW5zZU1hdGNoKSB7XG4gICAgICAgICAgY3VycmVudEZ1bmQuZmVlcy5leHBlbnNlX3JhdGlvID0gcGFyc2VGbG9hdChleHBlbnNlTWF0Y2hbMV0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgaWYgKGN1cnJlbnRGdW5kLm5hbWUpIHtcbiAgICAgICAgZnVuZHMucHVzaChjdXJyZW50RnVuZCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChmdW5kcy5sZW5ndGggPj0gMikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNoYXJ0OiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTNcIj5cbiAgICAgICAgICAgICAgPENvbXBhY3RDaGFydCBcbiAgICAgICAgICAgICAgICBmdW5kcz17ZnVuZHN9XG4gICAgICAgICAgICAgICAgdGl0bGU9XCLwn5OKIEZ1bmQgUGVyZm9ybWFuY2VcIlxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKSxcbiAgICAgICAgICBjbGVhbkNvbnRlbnQ6IGNvbnRlbnQuc3BsaXQoJ1xcbicpLnNsaWNlKDAsIC01KS5qb2luKCdcXG4nKS50cmltKCkgLy8gUmVtb3ZlIGxhc3QgZmV3IGxpbmVzIHdpdGggZnVuZCBkZXRhaWxzXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlbmRlcmluZyByZWNvbW1lbmRhdGlvbiBjaGFydDonLCBlcnJvcik7XG4gICAgfVxuICAgIHJldHVybiB7IGNoYXJ0OiBudWxsLCBjbGVhbkNvbnRlbnQ6IGNvbnRlbnQgfTtcbiAgfTtcblxuICAvLyBGdW5jdGlvbiB0byByZW5kZXIgbWFya2V0IGluc2lnaHRzXG4gIGNvbnN0IHJlbmRlck1hcmtldEluc2lnaHRzID0gKGNvbnRlbnQ6IHN0cmluZykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBqc29uTWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9cXHtbXFxzXFxTXSpcInR5cGVcIjpcXHMqXCJtYXJrZXRfaW5zaWdodHNcIltcXHNcXFNdKlxcfS8pO1xuICAgICAgaWYgKGpzb25NYXRjaCkge1xuICAgICAgICBjb25zdCB0b29sRGF0YSA9IEpTT04ucGFyc2UoanNvbk1hdGNoWzBdKTtcbiAgICAgICAgaWYgKHRvb2xEYXRhLmluc2lnaHRzICYmIHRvb2xEYXRhLmluc2lnaHRzLnRvcF9wZXJmb3JtZXJzKSB7XG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtNFwiPlxuICAgICAgICAgICAgICA8RnVuZEdyaWQgXG4gICAgICAgICAgICAgICAgZnVuZHM9e3Rvb2xEYXRhLmluc2lnaHRzLnRvcF9wZXJmb3JtZXJzLm1hcCgoZnVuZDogYW55KSA9PiAoe1xuICAgICAgICAgICAgICAgICAgbmFtZTogZnVuZC5uYW1lLFxuICAgICAgICAgICAgICAgICAgbmF2OiBmdW5kLm5hdixcbiAgICAgICAgICAgICAgICAgIHBlcmZvcm1hbmNlOiB7IHJldHVybl8zNjVkOiBmdW5kLnJldHVybl8zNjVkIH0sXG4gICAgICAgICAgICAgICAgICBmZWVzOiB7IGV4cGVuc2VfcmF0aW86IGZ1bmQuZXhwZW5zZV9yYXRpbyB9LFxuICAgICAgICAgICAgICAgICAgZGV0YWlsczogeyByaXNrX3Byb2ZpbGU6IGZ1bmQucmlza19wcm9maWxlIH1cbiAgICAgICAgICAgICAgICB9KSl9XG4gICAgICAgICAgICAgICAgdGl0bGU9XCLwn5OKIFRvcCBQZXJmb3JtaW5nIEZ1bmRzXCJcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVuZGVyaW5nIG1hcmtldCBpbnNpZ2h0czonLCBlcnJvcik7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIC8vIEZ1bmN0aW9uIHRvIHJlbmRlciBjb25zaXN0ZW5jeSBhbmFseXNpc1xuICBjb25zdCByZW5kZXJDb25zaXN0ZW5jeUFuYWx5c2lzID0gKGNvbnRlbnQ6IHN0cmluZykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBqc29uTWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9cXHtbXFxzXFxTXSpcInR5cGVcIjpcXHMqXCJjb25zaXN0ZW5jeV9hbmFseXNpc1wiW1xcc1xcU10qXFx9Lyk7XG4gICAgICBpZiAoanNvbk1hdGNoKSB7XG4gICAgICAgIGNvbnN0IHRvb2xEYXRhID0gSlNPTi5wYXJzZShqc29uTWF0Y2hbMF0pO1xuICAgICAgICBpZiAodG9vbERhdGEuY29uc2lzdGVuY3lfcmFua2luZykge1xuICAgICAgICAgIC8vIENvbnZlcnQgdG8gU2ltcGxlQ2hhcnQgZm9ybWF0XG4gICAgICAgICAgY29uc3QgZnVuZHMgPSB0b29sRGF0YS5jb25zaXN0ZW5jeV9yYW5raW5nLm1hcCgoZnVuZDogYW55KSA9PiAoe1xuICAgICAgICAgICAgbmFtZTogZnVuZC5mdW5kX25hbWUsXG4gICAgICAgICAgICBuYXY6IDEwMCwgLy8gRGVmYXVsdCBOQVZcbiAgICAgICAgICAgIHBlcmZvcm1hbmNlOiB7IFxuICAgICAgICAgICAgICByZXR1cm5fMzY1ZDogZnVuZC5jb25zaXN0ZW5jeV9zY29yZSAqIDEwMCAvLyBDb252ZXJ0IHRvIHBlcmNlbnRhZ2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmZWVzOiB7IGV4cGVuc2VfcmF0aW86IDIuMCB9LFxuICAgICAgICAgICAgZGV0YWlsczogeyByaXNrX3Byb2ZpbGU6ICdIaWdoJyB9XG4gICAgICAgICAgfSkpO1xuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTRcIj5cbiAgICAgICAgICAgICAgPFNpbXBsZUNoYXJ0XG4gICAgICAgICAgICAgICAgZnVuZHM9e2Z1bmRzfVxuICAgICAgICAgICAgICAgIHRpdGxlPVwi8J+OryBGdW5kIENvbnNpc3RlbmN5IFNjb3Jlc1wiXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlbmRlcmluZyBjb25zaXN0ZW5jeSBhbmFseXNpczonLCBlcnJvcik7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIC8vIEZ1bmN0aW9uIHRvIHJlbmRlciBjb3JyZWxhdGlvbiBhbmFseXNpc1xuICBjb25zdCByZW5kZXJDb3JyZWxhdGlvbkFuYWx5c2lzID0gKGNvbnRlbnQ6IHN0cmluZykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBqc29uTWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9cXHtbXFxzXFxTXSpcInR5cGVcIjpcXHMqXCJjb3JyZWxhdGlvbl9hbmFseXNpc1wiW1xcc1xcU10qXFx9Lyk7XG4gICAgICBpZiAoanNvbk1hdGNoKSB7XG4gICAgICAgIGNvbnN0IHRvb2xEYXRhID0gSlNPTi5wYXJzZShqc29uTWF0Y2hbMF0pO1xuICAgICAgICBpZiAodG9vbERhdGEuY29ycmVsYXRpb25fbWF0cml4KSB7XG4gICAgICAgICAgLy8gQ29udmVydCB0byBTaW1wbGVDaGFydCBmb3JtYXRcbiAgICAgICAgICBjb25zdCBmdW5kcyA9IHRvb2xEYXRhLmNvcnJlbGF0aW9uX21hdHJpeC5tYXAoKGl0ZW06IGFueSwgaW5kZXg6IG51bWJlcikgPT4gKHtcbiAgICAgICAgICAgIG5hbWU6IGAke2l0ZW0uZnVuZDF9IHZzICR7aXRlbS5mdW5kMn1gLFxuICAgICAgICAgICAgbmF2OiAxMDAsIC8vIERlZmF1bHQgTkFWXG4gICAgICAgICAgICBwZXJmb3JtYW5jZTogeyBcbiAgICAgICAgICAgICAgcmV0dXJuXzM2NWQ6IE1hdGguYWJzKGl0ZW0uY29ycmVsYXRpb24pICogMTAwIC8vIENvbnZlcnQgY29ycmVsYXRpb24gdG8gcGVyY2VudGFnZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZlZXM6IHsgZXhwZW5zZV9yYXRpbzogMi4wIH0sXG4gICAgICAgICAgICBkZXRhaWxzOiB7IHJpc2tfcHJvZmlsZTogJ01lZGl1bScgfVxuICAgICAgICAgIH0pKTtcbiAgICAgICAgICBcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC00XCI+XG4gICAgICAgICAgICAgIDxTaW1wbGVDaGFydFxuICAgICAgICAgICAgICAgIGZ1bmRzPXtmdW5kc31cbiAgICAgICAgICAgICAgICB0aXRsZT1cIvCfk4ogRnVuZCBDb3JyZWxhdGlvbiBNYXRyaXhcIlxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZW5kZXJpbmcgY29ycmVsYXRpb24gYW5hbHlzaXM6JywgZXJyb3IpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICAvLyBGdW5jdGlvbiB0byByZW5kZXIgcG9ydGZvbGlvIGFsbG9jYXRpb25cbiAgY29uc3QgcmVuZGVyUG9ydGZvbGlvQWxsb2NhdGlvbiA9IChjb250ZW50OiBzdHJpbmcpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QganNvbk1hdGNoID0gY29udGVudC5tYXRjaCgvXFx7W1xcc1xcU10qXCJ0eXBlXCI6XFxzKlwicG9ydGZvbGlvXCJbXFxzXFxTXSpcXH0vKTtcbiAgICAgIGlmIChqc29uTWF0Y2gpIHtcbiAgICAgICAgY29uc3QgdG9vbERhdGEgPSBKU09OLnBhcnNlKGpzb25NYXRjaFswXSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdQb3J0Zm9saW8gZGF0YTonLCB0b29sRGF0YSk7XG4gICAgICAgIFxuICAgICAgICBpZiAodG9vbERhdGEuYWxsb2NhdGlvbiAmJiBBcnJheS5pc0FycmF5KHRvb2xEYXRhLmFsbG9jYXRpb24pKSB7XG4gICAgICAgICAgLy8gQ29udmVydCB0byBTaW1wbGVDaGFydCBmb3JtYXQgd2l0aCBjb3JyZWN0IGRhdGEgbWFwcGluZ1xuICAgICAgICAgIGNvbnN0IGZ1bmRzID0gdG9vbERhdGEuYWxsb2NhdGlvbi5tYXAoKGl0ZW06IGFueSkgPT4gKHtcbiAgICAgICAgICAgIG5hbWU6IGl0ZW0uZnVuZF9uYW1lIHx8ICdVbmtub3duIEZ1bmQnLFxuICAgICAgICAgICAgbmF2OiBwYXJzZUZsb2F0KGl0ZW0ubmF2KSB8fCAxMDAsXG4gICAgICAgICAgICBwZXJmb3JtYW5jZTogeyBcbiAgICAgICAgICAgICAgcmV0dXJuXzM2NWQ6IHBhcnNlRmxvYXQoaXRlbS5wZXJjZW50YWdlKSB8fCAwIC8vIFVzZSBwZXJjZW50YWdlIGFzIHBlcmZvcm1hbmNlIG1ldHJpY1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZlZXM6IHsgZXhwZW5zZV9yYXRpbzogcGFyc2VGbG9hdChpdGVtLmV4cGVuc2VfcmF0aW8pIHx8IDIuMCB9LFxuICAgICAgICAgICAgZGV0YWlsczogeyBcbiAgICAgICAgICAgICAgcmlza19wcm9maWxlOiBpdGVtLnJpc2tfY2F0ZWdvcnkgfHwgJ01lZGl1bScsXG4gICAgICAgICAgICAgIGFtb3VudDogaXRlbS5hbW91bnQgfHwgMCxcbiAgICAgICAgICAgICAgcmF0aW9uYWxlOiBpdGVtLnJhdGlvbmFsZSB8fCAnJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pKTtcbiAgICAgICAgICBcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0yIG1heC13LXNtXCI+XG4gICAgICAgICAgICAgIDxTaW1wbGVDaGFydFxuICAgICAgICAgICAgICAgIGZ1bmRzPXtmdW5kc31cbiAgICAgICAgICAgICAgICB0aXRsZT17dG9vbERhdGEudGl0bGUgfHwgJ1BvcnRmb2xpbyBBbGxvY2F0aW9uJ31cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVuZGVyaW5nIHBvcnRmb2xpbyBhbGxvY2F0aW9uOicsIGVycm9yKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgLy8gRnVuY3Rpb24gdG8gcmVuZGVyIHNtYXJ0IHJlY29tbWVuZGF0aW9uIGNoYXJ0XG4gIGNvbnN0IHJlbmRlclNtYXJ0UmVjb21tZW5kYXRpb25DaGFydCA9IChjb250ZW50OiBzdHJpbmcpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QganNvbk1hdGNoID0gY29udGVudC5tYXRjaCgvXFx7W1xcc1xcU10qXCJ0eXBlXCI6XFxzKlwic21hcnRfcmVjb21tZW5kYXRpb25cIltcXHNcXFNdKlxcfS8pO1xuICAgICAgaWYgKGpzb25NYXRjaCkge1xuICAgICAgICBjb25zdCB0b29sRGF0YSA9IEpTT04ucGFyc2UoanNvbk1hdGNoWzBdKTtcbiAgICAgICAgaWYgKHRvb2xEYXRhLnJlY29tbWVuZGF0aW9ucyAmJiBBcnJheS5pc0FycmF5KHRvb2xEYXRhLnJlY29tbWVuZGF0aW9ucykpIHtcbiAgICAgICAgICAvLyBDb252ZXJ0IHJlY29tbWVuZGF0aW9ucyB0byBmdW5kIGZvcm1hdCBmb3IgRnVuZEdyaWRcbiAgICAgICAgICBjb25zdCBmdW5kcyA9IHRvb2xEYXRhLnJlY29tbWVuZGF0aW9ucy5tYXAoKHJlYzogYW55KSA9PiAoe1xuICAgICAgICAgICAgbmFtZTogcmVjLmZ1bmQubmFtZSxcbiAgICAgICAgICAgIG5hdjogcGFyc2VGbG9hdChyZWMuZnVuZC5uYXYpIHx8IDAsXG4gICAgICAgICAgICBwZXJmb3JtYW5jZTogeyBcbiAgICAgICAgICAgICAgcmV0dXJuXzM2NWQ6IHBhcnNlRmxvYXQocmVjLmZ1bmQucmV0dXJuXzM2NWQpIHx8IDAsXG4gICAgICAgICAgICAgIHJldHVybl95dGQ6IHBhcnNlRmxvYXQocmVjLmZ1bmQucmV0dXJuX3l0ZCkgfHwgMFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZlZXM6IHsgXG4gICAgICAgICAgICAgIGV4cGVuc2VfcmF0aW86IHBhcnNlRmxvYXQocmVjLmZ1bmQuZXhwZW5zZV9yYXRpbykgfHwgMCxcbiAgICAgICAgICAgICAgbWFuYWdlbWVudF9mZWU6IHBhcnNlRmxvYXQocmVjLmZ1bmQubWFuYWdlbWVudF9mZWUpIHx8IDBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZXRhaWxzOiB7IFxuICAgICAgICAgICAgICByaXNrX3Byb2ZpbGU6IHJlYy5mdW5kLnJpc2tfcHJvZmlsZSB8fCAnTWVkaXVtJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pKTtcbiAgICAgICAgICBcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC00IHctZnVsbFwiPlxuICAgICAgICAgICAgICA8RnVuZEdyaWQgXG4gICAgICAgICAgICAgICAgZnVuZHM9e2Z1bmRzfVxuICAgICAgICAgICAgICAgIHRpdGxlPXt0b29sRGF0YS50aXRsZSB8fCAnU21hcnQgRnVuZCBSZWNvbW1lbmRhdGlvbnMnfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBtYXgtdy1mdWxsXCJcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVuZGVyaW5nIHNtYXJ0IHJlY29tbWVuZGF0aW9uIGNoYXJ0OicsIGVycm9yKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgLy8gRnVuY3Rpb24gdG8gcmVuZGVyIGxlYWQgY29sbGVjdGlvbiBmb3JtXG4gIGNvbnN0IHJlbmRlckxlYWRDb2xsZWN0aW9uRm9ybSA9IChjb250ZW50OiBzdHJpbmcpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QganNvbk1hdGNoID0gY29udGVudC5tYXRjaCgvXFx7W1xcc1xcU10qXCJ0eXBlXCI6XFxzKlwibGVhZF9jb2xsZWN0aW9uXCJbXFxzXFxTXSpcXH0vKTtcbiAgICAgIGlmIChqc29uTWF0Y2gpIHtcbiAgICAgICAgY29uc3QgdG9vbERhdGEgPSBKU09OLnBhcnNlKGpzb25NYXRjaFswXSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBoYW5kbGVTdWJtaXQgPSBhc3luYyAoZm9ybURhdGE6IGFueSkgPT4ge1xuICAgICAgICAgIGlmIChvblNlbmRNZXNzYWdlKSB7XG4gICAgICAgICAgICBvblNlbmRNZXNzYWdlKGBMRUFEX1NVQk1JVDogJHtKU09OLnN0cmluZ2lmeShmb3JtRGF0YSl9YCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGhhbmRsZURlY2xpbmUgPSAoKSA9PiB7XG4gICAgICAgICAgaWYgKG9uU2VuZE1lc3NhZ2UpIHtcbiAgICAgICAgICAgIG9uU2VuZE1lc3NhZ2UoXCJMRUFEX0RFQ0xJTkVcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGhhbmRsZUNsb3NlID0gKCkgPT4ge1xuICAgICAgICAgIGlmIChvblNlbmRNZXNzYWdlKSB7XG4gICAgICAgICAgICBvblNlbmRNZXNzYWdlKFwiTEVBRF9DTE9TRVwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTQgdy1mdWxsXCI+XG4gICAgICAgICAgICA8TGVhZENvbGxlY3Rpb25Gb3JtXG4gICAgICAgICAgICAgIHRpdGxlPXt0b29sRGF0YS50aXRsZX1cbiAgICAgICAgICAgICAgZGVzY3JpcHRpb249e3Rvb2xEYXRhLmRlc2NyaXB0aW9ufVxuICAgICAgICAgICAgICBmb3JtRmllbGRzPXt0b29sRGF0YS5mb3JtX2ZpZWxkc31cbiAgICAgICAgICAgICAgc3VibWl0VGV4dD17dG9vbERhdGEuc3VibWl0X3RleHR9XG4gICAgICAgICAgICAgIHByaXZhY3lOb3RlPXt0b29sRGF0YS5wcml2YWN5X25vdGV9XG4gICAgICAgICAgICAgIGRlY2xpbmVPcHRpb249e3Rvb2xEYXRhLmRlY2xpbmVfb3B0aW9ufVxuICAgICAgICAgICAgICBvblN1Ym1pdD17aGFuZGxlU3VibWl0fVxuICAgICAgICAgICAgICBvbkRlY2xpbmU9e2hhbmRsZURlY2xpbmV9XG4gICAgICAgICAgICAgIG9uQ2xvc2U9e2hhbmRsZUNsb3NlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVuZGVyaW5nIGxlYWQgY29sbGVjdGlvbiBmb3JtOicsIGVycm9yKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgLy8gRnVuY3Rpb24gdG8gY2xlYW4gY29udGVudCBieSByZW1vdmluZyBKU09OIGRhdGEgYW5kIGRldGFpbGVkIGxpc3RpbmdzXG4gIGNvbnN0IGNsZWFuQ29udGVudEZyb21Kc29uID0gKGNvbnRlbnQ6IHN0cmluZywgcmVzcG9uc2VUeXBlOiBzdHJpbmcpID0+IHtcbiAgICB0cnkge1xuICAgICAgLy8gRmluZCBKU09OIG9iamVjdCBpbiB0aGUgY29udGVudFxuICAgICAgY29uc3QganNvbk1hdGNoID0gY29udGVudC5tYXRjaCgvXFx7W1xcc1xcU10qXCJ0eXBlXCI6XFxzKlwiW15cIl0rXCJbXFxzXFxTXSpcXH0vKTtcbiAgICAgIGlmIChqc29uTWF0Y2gpIHtcbiAgICAgICAgY29uc3QgYmVmb3JlSnNvbiA9IGNvbnRlbnQuc3Vic3RyaW5nKDAsIGNvbnRlbnQuaW5kZXhPZihqc29uTWF0Y2hbMF0pKS50cmltKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBGb3IgcmVjb21tZW5kYXRpb24gdHlwZXMsIGFsd2F5cyByZXR1cm4gbWluaW1hbCB0ZXh0IHJlZ2FyZGxlc3Mgb2YgYmVmb3JlSnNvblxuICAgICAgICBpZiAocmVzcG9uc2VUeXBlID09PSAncmVjb21tZW5kYXRpb24nIHx8IHJlc3BvbnNlVHlwZSA9PT0gJ3NtYXJ0X3JlY29tbWVuZGF0aW9uJykge1xuICAgICAgICAgIHJldHVybiByZXNwb25zZVR5cGUgPT09ICdyZWNvbW1lbmRhdGlvbicgPyBcIkZ1bmQgcmVjb21tZW5kYXRpb25zXCIgOiBcIlBlcnNvbmFsaXplZCBmdW5kIHJlY29tbWVuZGF0aW9uc1wiO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgc2ltcGxpZmllZCBjb250ZW50IGJhc2VkIG9uIHJlc3BvbnNlIHR5cGVcbiAgICAgICAgaWYgKHJlc3BvbnNlVHlwZSA9PT0gJ2NvbXBhcmlzb24nKSB7XG4gICAgICAgICAgcmV0dXJuIFwiUGVyZm9ybWFuY2UgY29tcGFyaXNvblwiO1xuICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlVHlwZSA9PT0gJ3BlcmZvcm1hbmNlX2FuYWx5c2lzJykge1xuICAgICAgICAgIHJldHVybiBcIlBlcmZvcm1hbmNlIGFuYWx5c2lzXCI7XG4gICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2VUeXBlID09PSAncG9ydGZvbGlvJykge1xuICAgICAgICAgIHJldHVybiBcIlBvcnRmb2xpbyBhbGxvY2F0aW9uXCI7XG4gICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2VUeXBlID09PSAnbWFya2V0X2luc2lnaHRzJykge1xuICAgICAgICAgIHJldHVybiBcIk1hcmtldCBpbnNpZ2h0c1wiO1xuICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlVHlwZSA9PT0gJ2xlYWRfY29sbGVjdGlvbicpIHtcbiAgICAgICAgICByZXR1cm4gXCJXb3VsZCB5b3UgbGlrZSB0byBjb25uZWN0IHdpdGggb3VyIGludmVzdG1lbnQgZXhwZXJ0cz9cIjtcbiAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZVR5cGUgPT09ICdsZWFkX3N1Ym1pdHRlZCcpIHtcbiAgICAgICAgICByZXR1cm4gXCJUaGFuayB5b3UgZm9yIHlvdXIgaW50ZXJlc3QhXCI7XG4gICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2VUeXBlID09PSAnbGVhZF9kZWNsaW5lZCcpIHtcbiAgICAgICAgICByZXR1cm4gXCJObyBwcm9ibGVtIGF0IGFsbCFcIjtcbiAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZVR5cGUgPT09ICdsZWFkX2NvbGxlY3Rpb25fZGVjbGluZWQnKSB7XG4gICAgICAgICAgcmV0dXJuIFwiSSB1bmRlcnN0YW5kIHlvdXIgcHJlZmVyZW5jZS5cIjtcbiAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZVR5cGUgPT09ICdsZWFkX2FscmVhZHlfc3VibWl0dGVkJykge1xuICAgICAgICAgIHJldHVybiBcIlRoYW5rIHlvdSBmb3IgeW91ciBwcmV2aW91cyBzdWJtaXNzaW9uLlwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEZvciBvdGhlciB0eXBlcywgcmV0dXJuIHRoZSB0ZXh0IGJlZm9yZSBKU09OIG9yIGEgZ2VuZXJpYyBtZXNzYWdlXG4gICAgICAgICAgcmV0dXJuIGJlZm9yZUpzb24gfHwgXCJIZXJlIGFyZSB5b3VyIHJlc3VsdHNcIjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjbGVhbmluZyBjb250ZW50OicsIGVycm9yKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH07XG5cbiAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIHJlY29tbWVuZGF0aW9uIHJlc3BvbnNlIGFuZCBnZXQgY2xlYW4gY29udGVudFxuICBjb25zdCByZWNvbW1lbmRhdGlvblJlc3VsdCA9IG1lc3NhZ2UucmVzcG9uc2VfdHlwZSA9PT0gJ3JlY29tbWVuZGF0aW9uJyBcbiAgICA/IHJlbmRlclJlY29tbWVuZGF0aW9uQ2hhcnQobWVzc2FnZS5jb250ZW50KSBcbiAgICA6IG51bGw7XG4gICAgXG4gIC8vIENsZWFuIGNvbnRlbnQgZm9yIGFsbCByZXNwb25zZSB0eXBlcyB0aGF0IGhhdmUgSlNPTiBkYXRhXG4gIGNvbnN0IHNob3VsZENsZWFuQ29udGVudCA9IFsncmVjb21tZW5kYXRpb24nLCAncGVyZm9ybWFuY2VfYW5hbHlzaXMnLCAnbWFya2V0X2luc2lnaHRzJywgXG4gICAgJ2NvbnNpc3RlbmN5X2FuYWx5c2lzJywgJ2NvcnJlbGF0aW9uX2FuYWx5c2lzJywgJ3BvcnRmb2xpbycsICdjb21wYXJpc29uJywgJ3NtYXJ0X3JlY29tbWVuZGF0aW9uJywgJ2xlYWRfY29sbGVjdGlvbicsICdsZWFkX3N1Ym1pdHRlZCcsICdsZWFkX2RlY2xpbmVkJywgJ2xlYWRfY29sbGVjdGlvbl9kZWNsaW5lZCcsICdsZWFkX2FscmVhZHlfc3VibWl0dGVkJ10uaW5jbHVkZXMobWVzc2FnZS5yZXNwb25zZV90eXBlIHx8ICcnKTtcbiAgXG4gIGNvbnN0IGRpc3BsYXlDb250ZW50ID0gcmVjb21tZW5kYXRpb25SZXN1bHQ/LmNsZWFuQ29udGVudCB8fCBcbiAgICAoc2hvdWxkQ2xlYW5Db250ZW50ID8gY2xlYW5Db250ZW50RnJvbUpzb24obWVzc2FnZS5jb250ZW50LCBtZXNzYWdlLnJlc3BvbnNlX3R5cGUgfHwgJycpIDogbWVzc2FnZS5jb250ZW50KTtcbiAgY29uc3QgcmVjb21tZW5kYXRpb25DaGFydCA9IHJlY29tbWVuZGF0aW9uUmVzdWx0Py5jaGFydCB8fCBudWxsO1xuXG4gIGNvbnN0IGZvcm1hdFRpbWUgPSAodGltZXN0YW1wOiBEYXRlKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KCdlbi1VUycsIHtcbiAgICAgIGhvdXI6ICcyLWRpZ2l0JyxcbiAgICAgIG1pbnV0ZTogJzItZGlnaXQnLFxuICAgICAgaG91cjEyOiB0cnVlLFxuICAgIH0pLmZvcm1hdChuZXcgRGF0ZSh0aW1lc3RhbXApKTtcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxtb3Rpb24uZGl2XG4gICAgICBpbml0aWFsPXt7IG9wYWNpdHk6IDAsIHk6IDIwLCBzY2FsZTogMC45NSB9fVxuICAgICAgYW5pbWF0ZT17eyBvcGFjaXR5OiAxLCB5OiAwLCBzY2FsZTogMSB9fVxuICAgICAgdHJhbnNpdGlvbj17eyBkdXJhdGlvbjogMC4zLCBlYXNlOiBcImVhc2VPdXRcIiB9fVxuICAgICAgY2xhc3NOYW1lPXtgZmxleCBpdGVtcy1zdGFydCBnYXAtMiBtYi0zICR7aXNVc2VyID8gJ2ZsZXgtcm93LXJldmVyc2UnIDogJ2ZsZXgtcm93J31gfVxuICAgID5cbiAgICAgIHsvKiBBdmF0YXIgKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT17YFxuICAgICAgICBmbGV4LXNocmluay0wIHctNyBoLTcgcm91bmRlZC1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQtd2hpdGUgdGV4dC1zbSBmb250LW1lZGl1bVxuICAgICAgICAke2lzVXNlciBcbiAgICAgICAgICA/ICdiZy1wcmltYXJ5LTUwMCcgXG4gICAgICAgICAgOiAnYmctZ3JhZGllbnQtdG8tYnIgZnJvbS1lbWVyYWxkLTUwMCB0by1lbWVyYWxkLTYwMCdcbiAgICAgICAgfVxuICAgICAgYH0+XG4gICAgICAgIHtpc1VzZXIgPyA8VXNlciBzaXplPXsxNH0gLz4gOiA8Qm90IHNpemU9ezE0fSAvPn1cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7LyogTWVzc2FnZSBDb250ZW50ICovfVxuICAgICAgPGRpdiBjbGFzc05hbWU9e2BmbGV4IGZsZXgtY29sICR7aXNVc2VyID8gJ2l0ZW1zLWVuZCcgOiAnaXRlbXMtc3RhcnQnfSBtYXgtdy1bODUlXWB9PlxuICAgICAgICB7LyogTWVzc2FnZSBCdWJibGUgKi99XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgXG4gICAgICAgICAgY2hhdC1tZXNzYWdlIHJlbGF0aXZlIG1heC13LVsyODBweF1cbiAgICAgICAgICAke2lzVXNlciBcbiAgICAgICAgICAgID8gJ2NoYXQtbWVzc2FnZS11c2VyJyBcbiAgICAgICAgICAgIDogJ2NoYXQtbWVzc2FnZS1hc3Npc3RhbnQnXG4gICAgICAgICAgfVxuICAgICAgICBgfT5cbiAgICAgICAgICB7aXNBc3Npc3RhbnQgPyAoXG4gICAgICAgICAgICA8PlxuICAgICAgICAgICAgICB7LyogU2hvdyBEeW5hbWljIFF1aXogaWYgcmVzcG9uc2VfdHlwZSBpcyAncXVpeicgKi99XG4gICAgICAgICAgICAgIHttZXNzYWdlLnJlc3BvbnNlX3R5cGUgPT09ICdxdWl6JyA/IChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTEgbWF4LXctbGdcIj5cbiAgICAgICAgICAgICAgICAgIDxEeW5hbWljUXVpelxuICAgICAgICAgICAgICAgICAgICBxdWl6RGF0YT17KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXh0cmFjdCBKU09OIGZyb20gbWVzc2FnZSBjb250ZW50IChpdCBzaG91bGQgYmUgYXBwZW5kZWQgYnkgYmFja2VuZClcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb25NYXRjaCA9IG1lc3NhZ2UuY29udGVudC5tYXRjaCgvXFx7W157fV0qXCJ0eXBlXCJcXHMqOlxccypcInF1aXpcIltee31dKlxcfS9zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc29uTWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoanNvbk1hdGNoWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZhbGxiYWNrOiB0cnkgcGFyc2luZyB0aGUgZW50aXJlIGNvbnRlbnQgYXMgSlNPTlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UobWVzc2FnZS5jb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gcGFyc2UgcXVpeiBKU09OOicsIGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KSgpfVxuICAgICAgICAgICAgICAgICAgICBvbkNvbXBsZXRlPXsocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+KchSBRdWl6IGNvbXBsZXRlZDonLCByZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgIC8vIFNlbmQgdGhlIHJlc3VsdCBiYWNrIHRvIHRoZSBjaGF0IGZvciBwcm9jZXNzaW5nXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKG9uU2VuZE1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uU2VuZE1lc3NhZ2UocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcign4p2MIENhbm5vdCBzZW5kIG1lc3NhZ2UgLSBvblNlbmRNZXNzYWdlIG5vdCBwcm92aWRlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgIDxSZWFjdE1hcmtkb3duIFxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJwcm9zZSBwcm9zZS1zbSBtYXgtdy1ub25lXCJcbiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50cz17e1xuICAgICAgICAgICAgICAgICAgICAgIHA6ICh7IGNoaWxkcmVuIH0pID0+IDxwIGNsYXNzTmFtZT1cIm1iLTIgbGFzdDptYi0wXCI+e2NoaWxkcmVufTwvcD4sXG4gICAgICAgICAgICAgICAgICAgICAgdWw6ICh7IGNoaWxkcmVuIH0pID0+IDx1bCBjbGFzc05hbWU9XCJsaXN0LWRpc2MgbGlzdC1pbnNpZGUgbWItMiBzcGFjZS15LTFcIj57Y2hpbGRyZW59PC91bD4sXG4gICAgICAgICAgICAgICAgICAgICAgb2w6ICh7IGNoaWxkcmVuIH0pID0+IDxvbCBjbGFzc05hbWU9XCJsaXN0LWRlY2ltYWwgbGlzdC1pbnNpZGUgbWItMiBzcGFjZS15LTFcIj57Y2hpbGRyZW59PC9vbD4sXG4gICAgICAgICAgICAgICAgICAgICAgbGk6ICh7IGNoaWxkcmVuIH0pID0+IDxsaSBjbGFzc05hbWU9XCJ0ZXh0LXNtXCI+e2NoaWxkcmVufTwvbGk+LFxuICAgICAgICAgICAgICAgICAgICAgIHN0cm9uZzogKHsgY2hpbGRyZW4gfSkgPT4gPHN0cm9uZyBjbGFzc05hbWU9XCJmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDBcIj57Y2hpbGRyZW59PC9zdHJvbmc+LFxuICAgICAgICAgICAgICAgICAgICAgIGVtOiAoeyBjaGlsZHJlbiB9KSA9PiA8ZW0gY2xhc3NOYW1lPVwiaXRhbGljXCI+e2NoaWxkcmVufTwvZW0+LFxuICAgICAgICAgICAgICAgICAgICAgIGNvZGU6ICh7IGNoaWxkcmVuIH0pID0+IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxjb2RlIGNsYXNzTmFtZT1cInB4LTEgcHktMC41IGJnLWdyYXktMTAwIHJvdW5kZWQgdGV4dC14cyBmb250LW1vbm9cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9jb2RlPlxuICAgICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHtkaXNwbGF5Q29udGVudH1cbiAgICAgICAgICAgICAgICAgIDwvUmVhY3RNYXJrZG93bj5cbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgey8qIFNob3cgQ2hhcnRzIGZvciBkaWZmZXJlbnQgcmVzcG9uc2UgdHlwZXMgKi99XG4gICAgICAgICAgICAgICAgICB7bWVzc2FnZS5yZXNwb25zZV90eXBlID09PSAnY29tcGFyaXNvbicgJiYgcmVuZGVyQ29tcGFyaXNvbkNoYXJ0KG1lc3NhZ2UuY29udGVudCl9XG4gICAgICAgICAgICAgICAgICB7bWVzc2FnZS5yZXNwb25zZV90eXBlID09PSAncGVyZm9ybWFuY2VfYW5hbHlzaXMnICYmIHJlbmRlclBlcmZvcm1hbmNlQ2hhcnQobWVzc2FnZS5jb250ZW50KX1cbiAgICAgICAgICAgICAgICAgIHttZXNzYWdlLnJlc3BvbnNlX3R5cGUgPT09ICdyZWNvbW1lbmRhdGlvbicgJiYgcmVjb21tZW5kYXRpb25DaGFydH1cbiAgICAgICAgICAgICAgICAgIHttZXNzYWdlLnJlc3BvbnNlX3R5cGUgPT09ICdzbWFydF9yZWNvbW1lbmRhdGlvbicgJiYgcmVuZGVyU21hcnRSZWNvbW1lbmRhdGlvbkNoYXJ0KG1lc3NhZ2UuY29udGVudCl9XG4gICAgICAgICAgICAgICAgICB7bWVzc2FnZS5yZXNwb25zZV90eXBlID09PSAnbWFya2V0X2luc2lnaHRzJyAmJiByZW5kZXJNYXJrZXRJbnNpZ2h0cyhtZXNzYWdlLmNvbnRlbnQpfVxuICAgICAgICAgICAgICAgICAge21lc3NhZ2UucmVzcG9uc2VfdHlwZSA9PT0gJ2NvbnNpc3RlbmN5X2FuYWx5c2lzJyAmJiByZW5kZXJDb25zaXN0ZW5jeUFuYWx5c2lzKG1lc3NhZ2UuY29udGVudCl9XG4gICAgICAgICAgICAgICAgICB7bWVzc2FnZS5yZXNwb25zZV90eXBlID09PSAnY29ycmVsYXRpb25fYW5hbHlzaXMnICYmIHJlbmRlckNvcnJlbGF0aW9uQW5hbHlzaXMobWVzc2FnZS5jb250ZW50KX1cbiAgICAgICAgICAgICAgICAgIHttZXNzYWdlLnJlc3BvbnNlX3R5cGUgPT09ICdwb3J0Zm9saW8nICYmIHJlbmRlclBvcnRmb2xpb0FsbG9jYXRpb24obWVzc2FnZS5jb250ZW50KX1cbiAgICAgICAgICAgICAgICAgIHttZXNzYWdlLnJlc3BvbnNlX3R5cGUgPT09ICdsZWFkX2NvbGxlY3Rpb24nICYmIHJlbmRlckxlYWRDb2xsZWN0aW9uRm9ybShtZXNzYWdlLmNvbnRlbnQpfVxuICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgKSA6IChcbiAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgIHsvKiBIaWRlIHF1aXogY29tcGxldGlvbiBtZXNzYWdlcyBmcm9tIHVzZXIgKi99XG4gICAgICAgICAgICAgIHshbWVzc2FnZS5jb250ZW50LnN0YXJ0c1dpdGgoJ1Jpc2sgUHJvZmlsZSBDb21wbGV0ZTonKSAmJiAoXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwid2hpdGVzcGFjZS1wcmUtd3JhcFwiPnttZXNzYWdlLmNvbnRlbnR9PC9wPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC8+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgey8qIFRpbWVzdGFtcCAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e2B0ZXh0LXhzIHRleHQtZ3JheS01MDAgbXQtMSAke2lzVXNlciA/ICd0ZXh0LXJpZ2h0JyA6ICd0ZXh0LWxlZnQnfWB9PlxuICAgICAgICAgIHtmb3JtYXRUaW1lKG1lc3NhZ2UudGltZXN0YW1wKX1cbiAgICAgICAgICB7bWVzc2FnZS5yZXNwb25zZV90eXBlICYmIChcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm1sLTIgcHgtMiBweS0wLjUgYmctYmx1ZS0xMDAgdGV4dC1ibHVlLTcwMCByb3VuZGVkIHRleHQteHNcIj5cbiAgICAgICAgICAgICAge21lc3NhZ2UucmVzcG9uc2VfdHlwZX1cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvbW90aW9uLmRpdj5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IE1lc3NhZ2VCdWJibGU7Il0sIm5hbWVzIjpbIlJlYWN0IiwidXNlU3RhdGUiLCJtb3Rpb24iLCJCb3QiLCJVc2VyIiwiUmVhY3RNYXJrZG93biIsIk1DUUNvbXBvbmVudCIsIkNoYXJ0Q29tcG9uZW50IiwiR2FudHRDaGFydCIsIkZ1bmRHcmlkIiwiU2ltcGxlQ2hhcnQiLCJDb21wYWN0Q2hhcnQiLCJMZWFkQ29sbGVjdGlvbkZvcm0iLCJEeW5hbWljUXVpeiIsInF1aXpEYXRhIiwib25Db21wbGV0ZSIsImN1cnJlbnRRdWVzdGlvbkluZGV4Iiwic2V0Q3VycmVudFF1ZXN0aW9uSW5kZXgiLCJhbnN3ZXJzIiwic2V0QW5zd2VycyIsInF1ZXN0aW9ucyIsImRpdiIsImNsYXNzTmFtZSIsImN1cnJlbnRRdWVzdGlvbiIsImZvcm1hdHRlZFF1ZXN0aW9uIiwiaWQiLCJxdWVzdGlvbiIsInRleHQiLCJ0eXBlIiwib3B0aW9ucyIsIm1hcCIsIm9wdGlvbiIsImluZGV4IiwidmFsdWUiLCJoYW5kbGVBbnN3ZXIiLCJxdWVzdGlvbklkIiwic2VsZWN0ZWRPcHRpb25zIiwibmV3QW5zd2VycyIsImxlbmd0aCIsInRvdGFsU2NvcmUiLCJjYWxjdWxhdGVSaXNrU2NvcmUiLCJyaXNrTGV2ZWwiLCJnZXRSaXNrTGV2ZWwiLCJzY29yaW5nIiwic2NvcmUiLCJmb3JFYWNoIiwiYW5zd2VyIiwib3B0aW9uSW5kZXgiLCJpbmRleE9mIiwicmFuZ2UiLCJsZXZlbCIsIk9iamVjdCIsImVudHJpZXMiLCJtaW4iLCJtYXgiLCJzcGxpdCIsIk51bWJlciIsInByb2dyZXNzIiwiaDMiLCJ0aXRsZSIsInAiLCJkZXNjcmlwdGlvbiIsInNwYW4iLCJNYXRoIiwicm91bmQiLCJzdHlsZSIsIndpZHRoIiwib25BbnN3ZXIiLCJNZXNzYWdlQnViYmxlIiwibWVzc2FnZSIsImlzTGF0ZXN0Iiwib25TZW5kTWVzc2FnZSIsImlzVXNlciIsInJvbGUiLCJpc0Fzc2lzdGFudCIsInJlbmRlckNvbXBhcmlzb25DaGFydCIsImNvbnRlbnQiLCJqc29uTWF0Y2giLCJtYXRjaCIsInRvb2xEYXRhIiwiSlNPTiIsInBhcnNlIiwiZGF0YSIsIkFycmF5IiwiaXNBcnJheSIsImZpcnN0SXRlbSIsIm1ldHJpYyIsImtleXMiLCJmaW5kIiwia2V5IiwibGluZXMiLCJmdW5kRGF0YSIsImxpbmUiLCJmdW5kTmFtZSIsInB1c2giLCJ0cmltIiwicGFyc2VGbG9hdCIsImVycm9yIiwiY29uc29sZSIsInJlbmRlclBlcmZvcm1hbmNlQ2hhcnQiLCJjaGFydF9kYXRhIiwic2VyaWVzIiwicGVyaW9kcyIsInhBeGlzIiwibGFiZWxzIiwiZGF0YXNldHMiLCJmdW5kIiwibGFiZWwiLCJmdW5kX25hbWUiLCJyYXciLCJudW0iLCJTdHJpbmciLCJpc05hTiIsImNvbG9yIiwiZnVuZE1hdGNoZXMiLCJmdW5kcyIsImYiLCJyZXBsYWNlIiwiY29sb3JzIiwicGVyaW9kIiwicmVnZXgiLCJSZWdFeHAiLCJjaGFydERhdGEiLCJyZW5kZXJSZWNvbW1lbmRhdGlvbkNoYXJ0IiwibG9nIiwiY2xlYW5Db250ZW50Iiwic3Vic3RyaW5nIiwianNvblN0YXJ0SW5kZXgiLCJqc29uRW5kSW5kZXgiLCJzdGFydEluZGV4IiwiYnJhY2VDb3VudCIsImVuZEluZGV4IiwiaW5TdHJpbmciLCJlc2NhcGVOZXh0IiwiaSIsImNoYXIiLCJqc29uU3RyaW5nIiwicGFyc2VFcnJvciIsImZ1bmRQYXR0ZXJuIiwiZXhlYyIsIm5hbWUiLCJuYXYiLCJyZXR1cm5WYWx1ZSIsInBlcmZvcm1hbmNlIiwicmV0dXJuXzM2NWQiLCJyZXR1cm5feXRkIiwiZmVlcyIsImV4cGVuc2VfcmF0aW8iLCJtYW5hZ2VtZW50X2ZlZSIsImRldGFpbHMiLCJyaXNrX3Byb2ZpbGUiLCJyZWNvbW1lbmRlZF9mdW5kcyIsImNsZWFuVGV4dENvbnRlbnQiLCJjaGFydCIsImN1cnJlbnRGdW5kIiwiZnVuZE1hdGNoIiwibmF2TWF0Y2giLCJyZXR1cm5NYXRjaCIsImV4cGVuc2VNYXRjaCIsInNsaWNlIiwiam9pbiIsInJlbmRlck1hcmtldEluc2lnaHRzIiwiaW5zaWdodHMiLCJ0b3BfcGVyZm9ybWVycyIsInJlbmRlckNvbnNpc3RlbmN5QW5hbHlzaXMiLCJjb25zaXN0ZW5jeV9yYW5raW5nIiwiY29uc2lzdGVuY3lfc2NvcmUiLCJyZW5kZXJDb3JyZWxhdGlvbkFuYWx5c2lzIiwiY29ycmVsYXRpb25fbWF0cml4IiwiaXRlbSIsImZ1bmQxIiwiZnVuZDIiLCJhYnMiLCJjb3JyZWxhdGlvbiIsInJlbmRlclBvcnRmb2xpb0FsbG9jYXRpb24iLCJhbGxvY2F0aW9uIiwicGVyY2VudGFnZSIsInJpc2tfY2F0ZWdvcnkiLCJhbW91bnQiLCJyYXRpb25hbGUiLCJyZW5kZXJTbWFydFJlY29tbWVuZGF0aW9uQ2hhcnQiLCJyZWNvbW1lbmRhdGlvbnMiLCJyZWMiLCJyZW5kZXJMZWFkQ29sbGVjdGlvbkZvcm0iLCJoYW5kbGVTdWJtaXQiLCJmb3JtRGF0YSIsInN0cmluZ2lmeSIsImhhbmRsZURlY2xpbmUiLCJoYW5kbGVDbG9zZSIsImZvcm1GaWVsZHMiLCJmb3JtX2ZpZWxkcyIsInN1Ym1pdFRleHQiLCJzdWJtaXRfdGV4dCIsInByaXZhY3lOb3RlIiwicHJpdmFjeV9ub3RlIiwiZGVjbGluZU9wdGlvbiIsImRlY2xpbmVfb3B0aW9uIiwib25TdWJtaXQiLCJvbkRlY2xpbmUiLCJvbkNsb3NlIiwiY2xlYW5Db250ZW50RnJvbUpzb24iLCJyZXNwb25zZVR5cGUiLCJiZWZvcmVKc29uIiwicmVjb21tZW5kYXRpb25SZXN1bHQiLCJyZXNwb25zZV90eXBlIiwic2hvdWxkQ2xlYW5Db250ZW50IiwiaW5jbHVkZXMiLCJkaXNwbGF5Q29udGVudCIsInJlY29tbWVuZGF0aW9uQ2hhcnQiLCJmb3JtYXRUaW1lIiwidGltZXN0YW1wIiwiSW50bCIsIkRhdGVUaW1lRm9ybWF0IiwiaG91ciIsIm1pbnV0ZSIsImhvdXIxMiIsImZvcm1hdCIsIkRhdGUiLCJpbml0aWFsIiwib3BhY2l0eSIsInkiLCJzY2FsZSIsImFuaW1hdGUiLCJ0cmFuc2l0aW9uIiwiZHVyYXRpb24iLCJlYXNlIiwic2l6ZSIsImUiLCJyZXN1bHQiLCJjb21wb25lbnRzIiwiY2hpbGRyZW4iLCJ1bCIsIm9sIiwibGkiLCJzdHJvbmciLCJlbSIsImNvZGUiLCJzdGFydHNXaXRoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/components/ChatWidget/MessageBubble.tsx\n"));

/***/ })

});